{"version":3,"sources":["../node_modules/words-count/dist/index.js","components/editor-page/renderer-pane/yaml-array-deprecation-alert.tsx","components/editor-page/synced-scroll/hooks/use-synced-scrolling.ts","components/editor-page/synced-scroll/hooks/use-on-user-scroll.ts","components/editor-page/synced-scroll/hooks/use-scroll-to-line-mark.ts","components/editor-page/synced-scroll/utils.ts","components/editor-page/table-of-contents/build-react-dom-from-toc-ast.tsx","components/editor-page/table-of-contents/table-of-contents.tsx","components/render-page/markdown-toc-button/table-of-contents-hovering-button.tsx","components/render-page/width-based-table-of-contents.tsx","components/render-page/markdown-document.tsx","components/render-page/iframe-renderer-to-editor-communicator.ts","components/editor-page/render-context/iframe-renderer-to-editor-communicator-context-provider.tsx","components/render-page/word-counter.ts","components/render-page/iframe-markdown-renderer.tsx","components/render-page/hooks/use-image-click-handler.ts","components/render-page/render-page.tsx","redux/note-details/methods.ts","hooks/common/use-apply-dark-mode.ts"],"names":["module","exports","e","314","t","r","d","default","a","wordsCount","c","wordsSplit","i","wordsDetect","u","o","n","words","count","arguments","length","String","trim","punctuationAsBreaker","disableDefaultPunctuation","punctuation","concat","forEach","RegExp","replace","split","filter","l","v","exec","push","Object","defineProperty","enumerable","get","prototype","hasOwnProperty","call","Symbol","toStringTag","value","YamlArrayDeprecationAlert","useTranslation","yamlDeprecatedTags","useApplicationState","state","noteDetails","frontmatter","deprecatedTagsSyntax","condition","Alert","data-cy","className","variant","dir","Trans","i18nKey","href","links","faq","useSyncedScrolling","outerContainerRef","rendererRef","numberOfLines","scrollState","onScroll","useState","lineMarks","setLineMarks","onLineMarkerPositionChanged","useCallback","linkMarkerPositions","current","documentRenderPaneTop","offsetTop","offset","adjustedLineMakerPositions","map","oldMarker","line","position","onUserScroll","scrollContainer","scrollTop","lineMarksBeforeScrollTop","lineMark","lineMarksAfterScrollTop","beforeLineMark","reduce","prevLineMark","currentLineMark","afterLineMark","componentHeight","distanceToBefore","percentageRaw","lineCount","Math","floor","lineHeight","innerScrolling","firstLineInView","scrolledPercentage","useOnUserScroll","contentLineCount","lastScrollPosition","useRef","scrollTo","targetPosition","top","useEffect","offsetHeight","lineNumber","lastMarkBefore","firstMarkAfter","currentMark","findLineMarks","positionBefore","positionAfter","lastMarkBeforeLine","correctedPosition","useScrollToLineMark","buildReactDomFromTocAst","toc","levelsToShowUnderThis","headerCounts","wrapInListItem","baseUrl","rawName","nameCount","slug","tocSlugify","headlineUrl","URL","toString","set","content","title","onClick","createJumpToMarkClickEventHandler","substr","child","TableOfContents","ast","maxDepth","tocTree","useMemo","Map","TableOfContentsHoveringButton","tocAst","Dropdown","drop","Toggle","id","icon","Menu","WidthBasedTableOfContents","width","MarkdownDocument","additionalOuterContainerClasses","additionalRendererClasses","onFirstHeadingChange","onFrontmatterChange","onMakeScrollSource","onTaskCheckedChange","markdownContent","onImageClick","onHeightChange","disableToc","rendererSize","useResizeObserver","ref","internalDocumentRenderPaneRef","containerWidth","setTocAst","useAlternativeBreaks","breaks","height","onMouseEnter","onTocChange","IframeRendererToEditorCommunicator","onSetMarkdownContentHandler","onSetDarkModeHandler","onSetScrollStateHandler","onSetBaseConfigurationHandler","onGetWordCountHandler","handler","this","enableCommunication","sendMessageToOtherSide","type","RenderIframeMessageType","RENDERER_READY","lineInMarkdown","checked","ON_TASK_CHECKBOX_CHANGE","firstHeading","ON_FIRST_HEADING_CHANGE","SET_SCROLL_SOURCE_TO_RENDERER","ON_SET_FRONTMATTER","SET_SCROLL_STATE","details","IMAGE_CLICKED","ON_HEIGHT_CHANGE","ON_WORD_COUNT_CALCULATED","event","renderMessage","data","SET_MARKDOWN_CONTENT","SET_DARKMODE","activated","SET_BASE_CONFIGURATION","baseConfiguration","GET_WORD_COUNT","IframeCommunicator","IFrameRendererToEditorCommunicatorContext","createContext","undefined","IframeRendererToEditorCommunicatorContextProvider","children","editorOrigin","useSelector","config","iframeCommunication","currentIFrameCommunicator","newCommunicator","setMessageTarget","window","parent","currentIFrame","sendRendererReady","unregisterEventListener","Provider","EXCLUDED_TAGS","EXCLUDED_CLASSES","countWords","node","textContent","includes","nodeName","toLowerCase","isExcludedTag","some","excludedClass","classList","contains","isExcludedClass","hasChildNodes","childNodes","childNode","IframeMarkdownRenderer","setMarkdownContent","setScrollState","setBaseConfiguration","iframeCommunicator","communicatorFromContext","useContext","Error","useIFrameRendererToEditorCommunicator","countWordsInRenderedDocument","documentContainer","document","querySelector","wordCount","sendWordCountCalculated","onSetBaseConfiguration","onSetMarkdownContent","onSetDarkMode","setDarkMode","onSetScrollState","onGetWordCount","sendTaskCheckBoxChange","sendFirstHeadingChanged","sendSetScrollSourceToRenderer","setNoteFrontmatter","sendSetFrontmatter","sendSetScrollState","image","target","src","sendClickedImageUrl","alt","useImageClickHandler","sendHeightChange","rendererType","RendererType","DOCUMENT","INTRO","RenderPage","useApplyDarkMode","setNoteMarkdownContent","store","dispatch","NoteDetailsActionType","SET_DOCUMENT_CONTENT","setNoteDataFromServer","apiResponse","SET_NOTE_DATA_FROM_SERVER","note","updateNoteTitleByFirstHeading","UPDATE_NOTE_TITLE_BY_FIRST_HEADING","initialState","SET_NOTE_FRONTMATTER","setCheckboxInMarkdownContent","SET_CHECKBOX_IN_MARKDOWN_CONTENT","darkModeActivated","useIsDarkModeActivated","body","add","remove"],"mappings":"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","file":"static/js/renderPage.63abf5c8.chunk.js","sourcesContent":["!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(\"words-count\",[],t):\"object\"==typeof exports?exports[\"words-count\"]=t():e[\"words-count\"]=t()}(this,(function(){return(()=>{\"use strict\";var e={314:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a,wordsCount:()=>c,wordsSplit:()=>i,wordsDetect:()=>u});var o=[\",\",\"，\",\".\",\"。\",\":\",\"：\",\";\",\"；\",\"[\",\"]\",\"【\",\"]\",\"】\",\"{\",\"｛\",\"}\",\"｝\",\"(\",\"（\",\")\",\"）\",\"<\",\"《\",\">\",\"》\",\"$\",\"￥\",\"!\",\"！\",\"?\",\"？\",\"~\",\"～\",\"'\",\"’\",'\"',\"“\",\"”\",\"*\",\"/\",\"\\\\\",\"&\",\"%\",\"@\",\"#\",\"^\",\"、\",\"、\",\"、\",\"、\"],n={words:[],count:0},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return n;var r=String(e);if(\"\"===r.trim())return n;var u=t.punctuationAsBreaker?\" \":\"\",c=t.disableDefaultPunctuation?[]:o,i=t.punctuation||[],a=c.concat(i);a.forEach((function(e){var t=new RegExp(\"\\\\\"+e,\"g\");r=r.replace(t,u)})),r=(r=(r=(r=r.replace(/[\\uFF00-\\uFFEF\\u2000-\\u206F]/g,\"\")).replace(/\\s+/,\" \")).split(\" \")).filter((function(e){return e.trim()}));var d=\"(\\\\d+)|[a-zA-ZÀ-ÿĀ-ſƀ-ɏɐ-ʯḀ-ỿЀ-ӿԀ-ԯഀ-ൿ]+|\",f=\"⺀-⻿⼀-⿟　-〿㇀-㇯㈀-㋿㌀-㏿㐀-㿿䀀-䶿一-俿倀-忿怀-濿瀀-翿耀-迿退-鿿豈-﫿\",p=\"぀-ゟ゠-ヿㇰ-ㇿ㆐-㆟\",s=\"ᄀ-ᇿ㄰-㆏ꥠ-꥿가-꿿뀀-뿿쀀-쿿퀀-힯ힰ-퟿\",l=new RegExp(d+\"[\"+f+p+s+\"]\",\"g\"),v=[];return r.forEach((function(e){var t,r=[];do{(t=l.exec(e))&&r.push(t[0])}while(t);0===r.length?v.push(e):v=v.concat(r)})),{words:v,count:v.length}},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=u(e,t),o=r.count;return o},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=u(e,t),o=r.words;return o};const a=c}},t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}return r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r(314)})()}));","/*\n * SPDX-FileCopyrightText: 2021 The HedgeDoc developers (see AUTHORS file)\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React from 'react'\nimport { Alert } from 'react-bootstrap'\nimport { Trans, useTranslation } from 'react-i18next'\nimport links from '../../../links.json'\nimport { TranslatedExternalLink } from '../../common/links/translated-external-link'\nimport { ShowIf } from '../../common/show-if/show-if'\nimport { useApplicationState } from '../../../hooks/common/use-application-state'\n\nexport const YamlArrayDeprecationAlert: React.FC = () => {\n  useTranslation()\n  const yamlDeprecatedTags = useApplicationState((state) => state.noteDetails.frontmatter.deprecatedTagsSyntax)\n\n  return (\n    <ShowIf condition={yamlDeprecatedTags}>\n      <Alert data-cy={'yamlArrayDeprecationAlert'} className={'text-wrap'} variant='warning' dir='auto'>\n        <span className={'text-wrap'}>\n          <span className={'text-wrap'}>\n            <Trans i18nKey='editor.deprecatedTags' />\n          </span>\n        </span>\n        <br />\n        <TranslatedExternalLink i18nKey={'common.readForMoreInfo'} href={links.faq} className={'text-primary'} />\n      </Alert>\n    </ShowIf>\n  )\n}\n","/*\n * SPDX-FileCopyrightText: 2021 The HedgeDoc developers (see AUTHORS file)\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useCallback, useState } from 'react'\nimport { LineMarkerPosition } from '../../../markdown-renderer/types'\nimport { ScrollState } from '../scroll-props'\nimport { useOnUserScroll } from './use-on-user-scroll'\nimport { useScrollToLineMark } from './use-scroll-to-line-mark'\n\nexport const useSyncedScrolling = (\n  outerContainerRef: React.RefObject<HTMLElement>,\n  rendererRef: React.RefObject<HTMLElement>,\n  numberOfLines: number,\n  scrollState?: ScrollState,\n  onScroll?: (scrollState: ScrollState) => void\n): [(lineMarkers: LineMarkerPosition[]) => void, () => void] => {\n  const [lineMarks, setLineMarks] = useState<LineMarkerPosition[]>()\n\n  const onLineMarkerPositionChanged = useCallback(\n    (linkMarkerPositions: LineMarkerPosition[]) => {\n      if (!outerContainerRef.current || !rendererRef.current) {\n        return\n      }\n      const documentRenderPaneTop = outerContainerRef.current.offsetTop ?? 0\n      const rendererTop = rendererRef.current.offsetTop ?? 0\n      const offset = rendererTop - documentRenderPaneTop\n      const adjustedLineMakerPositions = linkMarkerPositions.map((oldMarker) => ({\n        line: oldMarker.line,\n        position: oldMarker.position + offset\n      }))\n      setLineMarks(adjustedLineMakerPositions)\n    },\n    [outerContainerRef, rendererRef]\n  )\n\n  const onUserScroll = useOnUserScroll(lineMarks, outerContainerRef, onScroll)\n  useScrollToLineMark(scrollState, lineMarks, numberOfLines, outerContainerRef)\n\n  return [onLineMarkerPositionChanged, onUserScroll]\n}\n","/*\n * SPDX-FileCopyrightText: 2021 The HedgeDoc developers (see AUTHORS file)\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { RefObject, useCallback } from 'react'\nimport { LineMarkerPosition } from '../../../markdown-renderer/types'\nimport { ScrollState } from '../scroll-props'\n\nexport const useOnUserScroll = (\n  lineMarks: LineMarkerPosition[] | undefined,\n  scrollContainer: RefObject<HTMLElement>,\n  onScroll: ((newScrollState: ScrollState) => void) | undefined\n): (() => void) => {\n  return useCallback(() => {\n    if (!scrollContainer.current || !lineMarks || lineMarks.length === 0 || !onScroll) {\n      return\n    }\n\n    const scrollTop = scrollContainer.current.scrollTop\n\n    const lineMarksBeforeScrollTop = lineMarks.filter((lineMark) => lineMark.position <= scrollTop)\n    if (lineMarksBeforeScrollTop.length === 0) {\n      return\n    }\n\n    const lineMarksAfterScrollTop = lineMarks.filter((lineMark) => lineMark.position > scrollTop)\n    if (lineMarksAfterScrollTop.length === 0) {\n      return\n    }\n\n    const beforeLineMark = lineMarksBeforeScrollTop.reduce((prevLineMark, currentLineMark) =>\n      prevLineMark.line >= currentLineMark.line ? prevLineMark : currentLineMark\n    )\n\n    const afterLineMark = lineMarksAfterScrollTop.reduce((prevLineMark, currentLineMark) =>\n      prevLineMark.line < currentLineMark.line ? prevLineMark : currentLineMark\n    )\n\n    const componentHeight = afterLineMark.position - beforeLineMark.position\n    const distanceToBefore = scrollTop - beforeLineMark.position\n    const percentageRaw = distanceToBefore / componentHeight\n    const lineCount = afterLineMark.line - beforeLineMark.line\n    const line = Math.floor(lineCount * percentageRaw + beforeLineMark.line)\n    const lineHeight = componentHeight / lineCount\n    const innerScrolling = Math.floor(((distanceToBefore % lineHeight) / lineHeight) * 100)\n\n    const newScrollState: ScrollState = { firstLineInView: line, scrolledPercentage: innerScrolling }\n    onScroll(newScrollState)\n  }, [lineMarks, onScroll, scrollContainer])\n}\n","/*\n * SPDX-FileCopyrightText: 2021 The HedgeDoc developers (see AUTHORS file)\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { RefObject, useCallback, useEffect, useRef } from 'react'\nimport { LineMarkerPosition } from '../../../markdown-renderer/types'\nimport { ScrollState } from '../scroll-props'\nimport { findLineMarks } from '../utils'\n\nexport const useScrollToLineMark = (\n  scrollState: ScrollState | undefined,\n  lineMarks: LineMarkerPosition[] | undefined,\n  contentLineCount: number,\n  scrollContainer: RefObject<HTMLElement>\n): void => {\n  const lastScrollPosition = useRef<number>()\n\n  const scrollTo = useCallback(\n    (targetPosition: number): void => {\n      if (!scrollContainer.current || targetPosition === lastScrollPosition.current) {\n        return\n      }\n      lastScrollPosition.current = targetPosition\n      scrollContainer.current.scrollTo({\n        top: targetPosition\n      })\n    },\n    [scrollContainer]\n  )\n\n  useEffect(() => {\n    if (!scrollContainer.current || !lineMarks || lineMarks.length === 0 || !scrollState) {\n      return\n    }\n    if (scrollState.firstLineInView < lineMarks[0].line) {\n      scrollTo(0)\n      return\n    }\n    if (scrollState.firstLineInView > lineMarks[lineMarks.length - 1].line) {\n      scrollTo(scrollContainer.current.offsetHeight)\n      return\n    }\n    const { lastMarkBefore, firstMarkAfter } = findLineMarks(lineMarks, scrollState.firstLineInView)\n    const positionBefore = lastMarkBefore ? lastMarkBefore.position : lineMarks[0].position\n    const positionAfter = firstMarkAfter ? firstMarkAfter.position : scrollContainer.current.offsetHeight\n    const lastMarkBeforeLine = lastMarkBefore ? lastMarkBefore.line : 1\n    const firstMarkAfterLine = firstMarkAfter ? firstMarkAfter.line : contentLineCount\n    const linesBetweenMarkers = firstMarkAfterLine - lastMarkBeforeLine\n    const blockHeight = positionAfter - positionBefore\n    const lineHeight = blockHeight / linesBetweenMarkers\n    const position =\n      positionBefore +\n      (scrollState.firstLineInView - lastMarkBeforeLine) * lineHeight +\n      (scrollState.scrolledPercentage / 100) * lineHeight\n    const correctedPosition = Math.floor(position)\n    scrollTo(correctedPosition)\n  }, [contentLineCount, lineMarks, scrollContainer, scrollState, scrollTo])\n}\n","/*\n * SPDX-FileCopyrightText: 2021 The HedgeDoc developers (see AUTHORS file)\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { LineMarkerPosition } from '../../markdown-renderer/types'\n\nexport const findLineMarks = (\n  lineMarks: LineMarkerPosition[],\n  lineNumber: number\n): { lastMarkBefore: LineMarkerPosition | undefined; firstMarkAfter: LineMarkerPosition | undefined } => {\n  let lastMarkBefore\n  let firstMarkAfter\n  for (let i = 0; i < lineMarks.length; i++) {\n    const currentMark = lineMarks[i]\n    if (!currentMark) {\n      continue\n    }\n\n    if (currentMark.line <= lineNumber) {\n      lastMarkBefore = currentMark\n    }\n    if (currentMark.line > lineNumber) {\n      firstMarkAfter = currentMark\n    }\n    if (!!firstMarkAfter && !!lastMarkBefore) {\n      break\n    }\n  }\n  return {\n    lastMarkBefore,\n    firstMarkAfter\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2021 The HedgeDoc developers (see AUTHORS file)\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { TocAst } from 'markdown-it-toc-done-right'\nimport React, { Fragment, ReactElement } from 'react'\nimport { ShowIf } from '../../common/show-if/show-if'\nimport { createJumpToMarkClickEventHandler } from '../../markdown-renderer/replace-components/link-replacer/link-replacer'\nimport { tocSlugify } from './toc-slugify'\n\nexport const buildReactDomFromTocAst = (\n  toc: TocAst,\n  levelsToShowUnderThis: number,\n  headerCounts: Map<string, number>,\n  wrapInListItem: boolean,\n  baseUrl?: string\n): ReactElement | null => {\n  if (levelsToShowUnderThis < 0) {\n    return null\n  }\n\n  const rawName = toc.n.trim()\n  const nameCount = (headerCounts.get(rawName) ?? -1) + 1\n  const slug = `#${tocSlugify(rawName)}${nameCount > 0 ? `-${nameCount}` : ''}`\n  const headlineUrl = new URL(slug, baseUrl).toString()\n\n  headerCounts.set(rawName, nameCount)\n\n  const content = (\n    <Fragment>\n      <ShowIf condition={toc.l > 0}>\n        <a href={headlineUrl} title={rawName} onClick={createJumpToMarkClickEventHandler(slug.substr(1))}>\n          {rawName}\n        </a>\n      </ShowIf>\n      <ShowIf condition={toc.c.length > 0}>\n        <ul>\n          {toc.c.map((child) => buildReactDomFromTocAst(child, levelsToShowUnderThis - 1, headerCounts, true, baseUrl))}\n        </ul>\n      </ShowIf>\n    </Fragment>\n  )\n\n  if (wrapInListItem) {\n    return <li key={headlineUrl}>{content}</li>\n  } else {\n    return content\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2021 The HedgeDoc developers (see AUTHORS file)\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { TocAst } from 'markdown-it-toc-done-right'\nimport React, { useMemo } from 'react'\nimport { Trans, useTranslation } from 'react-i18next'\nimport { ShowIf } from '../../common/show-if/show-if'\nimport { buildReactDomFromTocAst } from './build-react-dom-from-toc-ast'\nimport './table-of-contents.scss'\n\nexport interface TableOfContentsProps {\n  ast: TocAst\n  maxDepth?: number\n  className?: string\n  baseUrl?: string\n}\n\nexport const TableOfContents: React.FC<TableOfContentsProps> = ({ ast, maxDepth = 3, className, baseUrl }) => {\n  useTranslation()\n  const tocTree = useMemo(\n    () => buildReactDomFromTocAst(ast, maxDepth, new Map<string, number>(), false, baseUrl),\n    [ast, maxDepth, baseUrl]\n  )\n\n  return (\n    <div className={`markdown-toc ${className ?? ''}`}>\n      <ShowIf condition={ast.c.length === 0}>\n        <Trans i18nKey={'editor.infoToc'} />\n      </ShowIf>\n      {tocTree}\n    </div>\n  )\n}\n","/*\n * SPDX-FileCopyrightText: 2021 The HedgeDoc developers (see AUTHORS file)\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React from 'react'\nimport { Dropdown } from 'react-bootstrap'\nimport { TocAst } from 'markdown-it-toc-done-right'\nimport { ForkAwesomeIcon } from '../../common/fork-awesome/fork-awesome-icon'\nimport { TableOfContents } from '../../editor-page/table-of-contents/table-of-contents'\nimport './markdown-toc-button.scss'\n\nexport interface MarkdownTocButtonProps {\n  tocAst: TocAst\n  baseUrl: string\n}\n\n/**\n * Renders a button that is hovering over the parent and shows a {@link TableOfContents table of contents list} as overlay if clicked.\n *\n * @param tocAst the {@link TocAst AST} that should be rendered.\n * @param baseUrl the base url that will be used to generate the links\n * @return the created component\n */\nexport const TableOfContentsHoveringButton: React.FC<MarkdownTocButtonProps> = ({ tocAst, baseUrl }) => {\n  return (\n    <div className={'markdown-toc-sidebar-button'}>\n      <Dropdown drop={'up'}>\n        <Dropdown.Toggle id='toc-overlay-button' variant={'secondary'} className={'no-arrow'}>\n          <ForkAwesomeIcon icon={'list-ol'} />\n        </Dropdown.Toggle>\n        <Dropdown.Menu>\n          <div className={'p-2'}>\n            <TableOfContents ast={tocAst} baseUrl={baseUrl} />\n          </div>\n        </Dropdown.Menu>\n      </Dropdown>\n    </div>\n  )\n}\n","/*\n * SPDX-FileCopyrightText: 2021 The HedgeDoc developers (see AUTHORS file)\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React from 'react'\nimport { TocAst } from 'markdown-it-toc-done-right'\nimport { TableOfContents } from '../editor-page/table-of-contents/table-of-contents'\nimport { TableOfContentsHoveringButton } from './markdown-toc-button/table-of-contents-hovering-button'\n\nexport interface DocumentExternalTocProps {\n  tocAst: TocAst\n  width: number\n  baseUrl: string\n}\n\nconst MAX_WIDTH_FOR_BUTTON_VISIBILITY = 1100\n\n/**\n * Renders the {@link TableOfContents table of contents list} for the given {@link TocAst AST}.\n * If the given width is below {@link MAX_WIDTH_FOR_BUTTON_VISIBILITY the width limit} then a {@link TableOfContentsHoveringButton button} with an overlay will be shown instead.\n *\n * @param tocAst the {@link TocAst AST} that should be rendered.\n * @param width the width that should be used to determine if the button should be shown.\n * @param baseUrl the base url that will be used to generate the links //TODO: replace with consumer/provider\n * @return the created component\n */\nexport const WidthBasedTableOfContents: React.FC<DocumentExternalTocProps> = ({ tocAst, width, baseUrl }) => {\n  if (width >= MAX_WIDTH_FOR_BUTTON_VISIBILITY) {\n    return <TableOfContents ast={tocAst} className={'sticky'} baseUrl={baseUrl} />\n  } else {\n    return <TableOfContentsHoveringButton tocAst={tocAst} baseUrl={baseUrl} />\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2021 The HedgeDoc developers (see AUTHORS file)\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { TocAst } from 'markdown-it-toc-done-right'\nimport React, { MutableRefObject, useEffect, useMemo, useRef, useState } from 'react'\nimport useResizeObserver from 'use-resize-observer'\nimport { NoteFrontmatter } from '../editor-page/note-frontmatter/note-frontmatter'\nimport { YamlArrayDeprecationAlert } from '../editor-page/renderer-pane/yaml-array-deprecation-alert'\nimport { useSyncedScrolling } from '../editor-page/synced-scroll/hooks/use-synced-scrolling'\nimport { ScrollProps } from '../editor-page/synced-scroll/scroll-props'\nimport { BasicMarkdownRenderer } from '../markdown-renderer/basic-markdown-renderer'\nimport { ImageClickHandler } from '../markdown-renderer/replace-components/image/image-replacer'\nimport './markdown-document.scss'\nimport { WidthBasedTableOfContents } from './width-based-table-of-contents'\nimport { ShowIf } from '../common/show-if/show-if'\nimport { useApplicationState } from '../../hooks/common/use-application-state'\n\nexport interface RendererProps extends ScrollProps {\n  onFirstHeadingChange?: (firstHeading: string | undefined) => void\n  onFrontmatterChange?: (frontmatter: NoteFrontmatter | undefined) => void\n  onTaskCheckedChange?: (lineInMarkdown: number, checked: boolean) => void\n  documentRenderPaneRef?: MutableRefObject<HTMLDivElement | null>\n  markdownContent: string\n  onImageClick?: ImageClickHandler\n  onHeightChange?: (height: number) => void\n}\n\nexport interface MarkdownDocumentProps extends RendererProps {\n  additionalOuterContainerClasses?: string\n  additionalRendererClasses?: string\n  disableToc?: boolean\n  baseUrl: string\n}\n\nexport const MarkdownDocument: React.FC<MarkdownDocumentProps> = ({\n  additionalOuterContainerClasses,\n  additionalRendererClasses,\n  onFirstHeadingChange,\n  onFrontmatterChange,\n  onMakeScrollSource,\n  onTaskCheckedChange,\n  baseUrl,\n  markdownContent,\n  onImageClick,\n  onScroll,\n  scrollState,\n  onHeightChange,\n  disableToc\n}) => {\n  const rendererRef = useRef<HTMLDivElement | null>(null)\n  const rendererSize = useResizeObserver({ ref: rendererRef.current })\n\n  const internalDocumentRenderPaneRef = useRef<HTMLDivElement>(null)\n  const internalDocumentRenderPaneSize = useResizeObserver({ ref: internalDocumentRenderPaneRef.current })\n  const containerWidth = internalDocumentRenderPaneSize.width ?? 0\n\n  const [tocAst, setTocAst] = useState<TocAst>()\n\n  const useAlternativeBreaks = useApplicationState((state) => state.noteDetails.frontmatter.breaks)\n\n  useEffect(() => {\n    if (!onHeightChange) {\n      return\n    }\n    onHeightChange(rendererSize.height ? rendererSize.height + 1 : 0)\n  }, [rendererSize.height, onHeightChange])\n\n  const contentLineCount = useMemo(() => markdownContent.split('\\n').length, [markdownContent])\n  const [onLineMarkerPositionChanged, onUserScroll] = useSyncedScrolling(\n    internalDocumentRenderPaneRef,\n    rendererRef,\n    contentLineCount,\n    scrollState,\n    onScroll\n  )\n\n  return (\n    <div\n      className={`markdown-document ${additionalOuterContainerClasses ?? ''}`}\n      ref={internalDocumentRenderPaneRef}\n      onScroll={onUserScroll}\n      onMouseEnter={onMakeScrollSource}>\n      <div className={'markdown-document-side'} />\n      <div className={'markdown-document-content'}>\n        <YamlArrayDeprecationAlert />\n        <BasicMarkdownRenderer\n          outerContainerRef={rendererRef}\n          className={`mb-3 ${additionalRendererClasses ?? ''}`}\n          content={markdownContent}\n          onFirstHeadingChange={onFirstHeadingChange}\n          onLineMarkerPositionChanged={onLineMarkerPositionChanged}\n          onFrontmatterChange={onFrontmatterChange}\n          onTaskCheckedChange={onTaskCheckedChange}\n          onTocChange={setTocAst}\n          baseUrl={baseUrl}\n          onImageClick={onImageClick}\n          useAlternativeBreaks={useAlternativeBreaks}\n        />\n      </div>\n      <div className={'markdown-document-side pt-4'}>\n        <ShowIf condition={!!tocAst && !disableToc}>\n          <WidthBasedTableOfContents tocAst={tocAst as TocAst} baseUrl={baseUrl} width={containerWidth} />\n        </ShowIf>\n      </div>\n    </div>\n  )\n}\n","/*\n * SPDX-FileCopyrightText: 2021 The HedgeDoc developers (see AUTHORS file)\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { NoteFrontmatter } from '../editor-page/note-frontmatter/note-frontmatter'\nimport { ScrollState } from '../editor-page/synced-scroll/scroll-props'\nimport { IframeCommunicator } from './iframe-communicator'\nimport {\n  BaseConfiguration,\n  EditorToRendererIframeMessage,\n  ImageDetails,\n  RendererToEditorIframeMessage,\n  RenderIframeMessageType\n} from './rendering-message'\n\nexport class IframeRendererToEditorCommunicator extends IframeCommunicator<\n  RendererToEditorIframeMessage,\n  EditorToRendererIframeMessage\n> {\n  private onSetMarkdownContentHandler?: (markdownContent: string) => void\n  private onSetDarkModeHandler?: (darkModeActivated: boolean) => void\n  private onSetScrollStateHandler?: (scrollState: ScrollState) => void\n  private onSetBaseConfigurationHandler?: (baseConfiguration: BaseConfiguration) => void\n  private onGetWordCountHandler?: () => void\n\n  public onSetBaseConfiguration(handler?: (baseConfiguration: BaseConfiguration) => void): void {\n    this.onSetBaseConfigurationHandler = handler\n  }\n\n  public onSetMarkdownContent(handler?: (markdownContent: string) => void): void {\n    this.onSetMarkdownContentHandler = handler\n  }\n\n  public onSetDarkMode(handler?: (darkModeActivated: boolean) => void): void {\n    this.onSetDarkModeHandler = handler\n  }\n\n  public onSetScrollState(handler?: (scrollState: ScrollState) => void): void {\n    this.onSetScrollStateHandler = handler\n  }\n\n  public onGetWordCount(handler?: () => void): void {\n    this.onGetWordCountHandler = handler\n  }\n\n  public sendRendererReady(): void {\n    this.enableCommunication()\n    this.sendMessageToOtherSide({\n      type: RenderIframeMessageType.RENDERER_READY\n    })\n  }\n\n  public sendTaskCheckBoxChange(lineInMarkdown: number, checked: boolean): void {\n    this.sendMessageToOtherSide({\n      type: RenderIframeMessageType.ON_TASK_CHECKBOX_CHANGE,\n      checked,\n      lineInMarkdown\n    })\n  }\n\n  public sendFirstHeadingChanged(firstHeading: string | undefined): void {\n    this.sendMessageToOtherSide({\n      type: RenderIframeMessageType.ON_FIRST_HEADING_CHANGE,\n      firstHeading\n    })\n  }\n\n  public sendSetScrollSourceToRenderer(): void {\n    this.sendMessageToOtherSide({\n      type: RenderIframeMessageType.SET_SCROLL_SOURCE_TO_RENDERER\n    })\n  }\n\n  public sendSetFrontmatter(frontmatter: NoteFrontmatter | undefined): void {\n    this.sendMessageToOtherSide({\n      type: RenderIframeMessageType.ON_SET_FRONTMATTER,\n      frontmatter: frontmatter\n    })\n  }\n\n  public sendSetScrollState(scrollState: ScrollState): void {\n    this.sendMessageToOtherSide({\n      type: RenderIframeMessageType.SET_SCROLL_STATE,\n      scrollState\n    })\n  }\n\n  public sendClickedImageUrl(details: ImageDetails): void {\n    this.sendMessageToOtherSide({\n      type: RenderIframeMessageType.IMAGE_CLICKED,\n      details: details\n    })\n  }\n\n  public sendHeightChange(height: number): void {\n    this.sendMessageToOtherSide({\n      type: RenderIframeMessageType.ON_HEIGHT_CHANGE,\n      height\n    })\n  }\n\n  public sendWordCountCalculated(words: number): void {\n    this.sendMessageToOtherSide({\n      type: RenderIframeMessageType.ON_WORD_COUNT_CALCULATED,\n      words\n    })\n  }\n\n  protected handleEvent(event: MessageEvent<EditorToRendererIframeMessage>): boolean | undefined {\n    const renderMessage = event.data\n    switch (renderMessage.type) {\n      case RenderIframeMessageType.SET_MARKDOWN_CONTENT:\n        this.onSetMarkdownContentHandler?.(renderMessage.content)\n        return false\n      case RenderIframeMessageType.SET_DARKMODE:\n        this.onSetDarkModeHandler?.(renderMessage.activated)\n        return false\n      case RenderIframeMessageType.SET_SCROLL_STATE:\n        this.onSetScrollStateHandler?.(renderMessage.scrollState)\n        return false\n      case RenderIframeMessageType.SET_BASE_CONFIGURATION:\n        this.onSetBaseConfigurationHandler?.(renderMessage.baseConfiguration)\n        return false\n      case RenderIframeMessageType.GET_WORD_COUNT:\n        this.onGetWordCountHandler?.()\n        return false\n    }\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2021 The HedgeDoc developers (see AUTHORS file)\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { createContext, useContext, useEffect, useMemo } from 'react'\nimport { IframeRendererToEditorCommunicator } from '../../render-page/iframe-renderer-to-editor-communicator'\nimport { useSelector } from 'react-redux'\nimport { ApplicationState } from '../../../redux'\n\nconst IFrameRendererToEditorCommunicatorContext = createContext<IframeRendererToEditorCommunicator | undefined>(\n  undefined\n)\n\n/**\n * Provides the {@link IframeRendererToEditorCommunicator renderer to editor iframe communicator} that is set by a {@link IframeRendererToEditorCommunicatorContextProvider context provider}.\n *\n * @return the received communicator\n * @throws Error if no communicator was received\n */\nexport const useIFrameRendererToEditorCommunicator: () => IframeRendererToEditorCommunicator = () => {\n  const communicatorFromContext = useContext(IFrameRendererToEditorCommunicatorContext)\n  if (!communicatorFromContext) {\n    throw new Error('No renderer-to-editor-iframe-communicator received. Did you forget to use the provider component?')\n  }\n  return communicatorFromContext\n}\n\nexport const IframeRendererToEditorCommunicatorContextProvider: React.FC = ({ children }) => {\n  const editorOrigin = useSelector((state: ApplicationState) => state.config.iframeCommunication.editorOrigin)\n  const currentIFrameCommunicator = useMemo<IframeRendererToEditorCommunicator>(() => {\n    const newCommunicator = new IframeRendererToEditorCommunicator()\n    newCommunicator.setMessageTarget(window.parent, editorOrigin)\n    return newCommunicator\n  }, [editorOrigin])\n\n  useEffect(() => {\n    const currentIFrame = currentIFrameCommunicator\n    currentIFrame?.sendRendererReady()\n    return () => currentIFrame?.unregisterEventListener()\n  }, [currentIFrameCommunicator])\n\n  return (\n    <IFrameRendererToEditorCommunicatorContext.Provider value={currentIFrameCommunicator}>\n      {children}\n    </IFrameRendererToEditorCommunicatorContext.Provider>\n  )\n}\n","/*\n * SPDX-FileCopyrightText: 2021 The HedgeDoc developers (see AUTHORS file)\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport wordsCount from 'words-count'\n\n/** List of HTML tag names that should not be counted. */\nconst EXCLUDED_TAGS = ['img', 'pre', 'nav']\n/** List of class names that should not be counted. */\nconst EXCLUDED_CLASSES = ['katex-mathml']\n\n/**\n * Checks whether the given node is an excluded HTML tag and therefore should be\n * excluded from counting.\n * @param node The node to test.\n * @return true if the node should be excluded, false otherwise.\n */\nconst isExcludedTag = (node: Element | ChildNode): boolean => {\n  return EXCLUDED_TAGS.includes(node.nodeName.toLowerCase())\n}\n\n/**\n * Checks whether the given node is a HTML element with an excluded class name,\n * so that it should be excluded.\n * @param node The node to test.\n * @return true if the node should be excluded, false otherwise.\n */\nconst isExcludedClass = (node: Element | ChildNode): boolean => {\n  return EXCLUDED_CLASSES.some((excludedClass) => (node as HTMLElement).classList?.contains(excludedClass))\n}\n\n/**\n * Counts the words of the given node while ignoring empty nodes and excluded\n * nodes. Child nodes will recursively counted as well.\n * @param node The node whose content's words should be counted.\n * @return The number of words counted in this node and its children.\n */\nexport const countWords = (node: Element | ChildNode): number => {\n  if (!node.textContent || isExcludedTag(node) || isExcludedClass(node)) {\n    return 0\n  }\n  if (!node.hasChildNodes()) {\n    return wordsCount(node.textContent)\n  }\n  return [...node.childNodes].reduce((words, childNode) => {\n    return words + countWords(childNode)\n  }, 0)\n}\n","/*\n * SPDX-FileCopyrightText: 2021 The HedgeDoc developers (see AUTHORS file)\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useCallback, useEffect, useState } from 'react'\nimport { ScrollState } from '../editor-page/synced-scroll/scroll-props'\nimport { BaseConfiguration, RendererType } from './rendering-message'\nimport { setDarkMode } from '../../redux/dark-mode/methods'\nimport { NoteFrontmatter } from '../editor-page/note-frontmatter/note-frontmatter'\nimport { setNoteFrontmatter } from '../../redux/note-details/methods'\nimport { ImageClickHandler } from '../markdown-renderer/replace-components/image/image-replacer'\nimport { useImageClickHandler } from './hooks/use-image-click-handler'\nimport { MarkdownDocument } from './markdown-document'\nimport { useIFrameRendererToEditorCommunicator } from '../editor-page/render-context/iframe-renderer-to-editor-communicator-context-provider'\nimport { countWords } from './word-counter'\n\nexport const IframeMarkdownRenderer: React.FC = () => {\n  const [markdownContent, setMarkdownContent] = useState('')\n  const [scrollState, setScrollState] = useState<ScrollState>({ firstLineInView: 1, scrolledPercentage: 0 })\n  const [baseConfiguration, setBaseConfiguration] = useState<BaseConfiguration | undefined>(undefined)\n\n  const iframeCommunicator = useIFrameRendererToEditorCommunicator()\n\n  const countWordsInRenderedDocument = useCallback(() => {\n    const documentContainer = document.querySelector('.markdown-body')\n    if (!documentContainer) {\n      iframeCommunicator.sendWordCountCalculated(0)\n      return\n    }\n    const wordCount = countWords(documentContainer)\n    iframeCommunicator.sendWordCountCalculated(wordCount)\n  }, [iframeCommunicator])\n\n  useEffect(() => iframeCommunicator.onSetBaseConfiguration(setBaseConfiguration), [iframeCommunicator])\n  useEffect(() => iframeCommunicator.onSetMarkdownContent(setMarkdownContent), [iframeCommunicator])\n  useEffect(() => iframeCommunicator.onSetDarkMode(setDarkMode), [iframeCommunicator])\n  useEffect(() => iframeCommunicator.onSetScrollState(setScrollState), [iframeCommunicator, scrollState])\n  useEffect(\n    () => iframeCommunicator.onGetWordCount(countWordsInRenderedDocument),\n    [iframeCommunicator, countWordsInRenderedDocument]\n  )\n\n  const onTaskCheckedChange = useCallback(\n    (lineInMarkdown: number, checked: boolean) => {\n      iframeCommunicator.sendTaskCheckBoxChange(lineInMarkdown, checked)\n    },\n    [iframeCommunicator]\n  )\n\n  const onFirstHeadingChange = useCallback(\n    (firstHeading?: string) => {\n      iframeCommunicator.sendFirstHeadingChanged(firstHeading)\n    },\n    [iframeCommunicator]\n  )\n\n  const onMakeScrollSource = useCallback(() => {\n    iframeCommunicator.sendSetScrollSourceToRenderer()\n  }, [iframeCommunicator])\n\n  const onFrontmatterChange = useCallback(\n    (frontmatter?: NoteFrontmatter) => {\n      setNoteFrontmatter(frontmatter)\n      iframeCommunicator.sendSetFrontmatter(frontmatter)\n    },\n    [iframeCommunicator]\n  )\n\n  const onScroll = useCallback(\n    (scrollState: ScrollState) => {\n      iframeCommunicator.sendSetScrollState(scrollState)\n    },\n    [iframeCommunicator]\n  )\n\n  const onImageClick: ImageClickHandler = useImageClickHandler(iframeCommunicator)\n\n  const onHeightChange = useCallback(\n    (height: number) => {\n      iframeCommunicator.sendHeightChange(height)\n    },\n    [iframeCommunicator]\n  )\n\n  if (!baseConfiguration) {\n    return null\n  }\n\n  switch (baseConfiguration.rendererType) {\n    case RendererType.DOCUMENT:\n      return (\n        <MarkdownDocument\n          additionalOuterContainerClasses={'vh-100 bg-light'}\n          markdownContent={markdownContent}\n          onTaskCheckedChange={onTaskCheckedChange}\n          onFirstHeadingChange={onFirstHeadingChange}\n          onMakeScrollSource={onMakeScrollSource}\n          onFrontmatterChange={onFrontmatterChange}\n          scrollState={scrollState}\n          onScroll={onScroll}\n          baseUrl={baseConfiguration.baseUrl}\n          onImageClick={onImageClick}\n        />\n      )\n    case RendererType.INTRO:\n      return (\n        <MarkdownDocument\n          additionalOuterContainerClasses={'vh-100 bg-light overflow-y-hidden'}\n          markdownContent={markdownContent}\n          baseUrl={baseConfiguration.baseUrl}\n          onImageClick={onImageClick}\n          disableToc={true}\n          onHeightChange={onHeightChange}\n        />\n      )\n    default:\n      return null\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2021 The HedgeDoc developers (see AUTHORS file)\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport React, { useCallback } from 'react'\nimport { ImageClickHandler } from '../../markdown-renderer/replace-components/image/image-replacer'\nimport { IframeRendererToEditorCommunicator } from '../iframe-renderer-to-editor-communicator'\n\nexport const useImageClickHandler = (iframeCommunicator: IframeRendererToEditorCommunicator): ImageClickHandler => {\n  return useCallback(\n    (event: React.MouseEvent<HTMLImageElement, MouseEvent>) => {\n      const image = event.target as HTMLImageElement\n      if (image.src === '') {\n        return\n      }\n      iframeCommunicator.sendClickedImageUrl({\n        src: image.src,\n        alt: image.alt,\n        title: image.title\n      })\n    },\n    [iframeCommunicator]\n  )\n}\n","/*\n * SPDX-FileCopyrightText: 2021 The HedgeDoc developers (see AUTHORS file)\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\nimport React from 'react'\nimport { useApplyDarkMode } from '../../hooks/common/use-apply-dark-mode'\nimport { IframeMarkdownRenderer } from './iframe-markdown-renderer'\nimport { IframeRendererToEditorCommunicatorContextProvider } from '../editor-page/render-context/iframe-renderer-to-editor-communicator-context-provider'\n\nexport const RenderPage: React.FC = () => {\n  useApplyDarkMode()\n\n  return (\n    <IframeRendererToEditorCommunicatorContextProvider>\n      <IframeMarkdownRenderer />\n    </IframeRendererToEditorCommunicatorContextProvider>\n  )\n}\n\nexport default RenderPage\n","/*\n * SPDX-FileCopyrightText: 2021 The HedgeDoc developers (see AUTHORS file)\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { store } from '..'\nimport { NoteDto } from '../../api/notes/types'\nimport { NoteFrontmatter } from '../../components/editor-page/note-frontmatter/note-frontmatter'\nimport { initialState } from './reducers'\nimport {\n  NoteDetailsActionType,\n  SetCheckboxInMarkdownContentAction,\n  SetNoteDetailsAction,\n  SetNoteDetailsFromServerAction,\n  SetNoteFrontmatterFromRenderingAction,\n  UpdateNoteTitleByFirstHeadingAction\n} from './types'\n\nexport const setNoteMarkdownContent = (content: string): void => {\n  store.dispatch({\n    type: NoteDetailsActionType.SET_DOCUMENT_CONTENT,\n    content\n  } as SetNoteDetailsAction)\n}\n\nexport const setNoteDataFromServer = (apiResponse: NoteDto): void => {\n  store.dispatch({\n    type: NoteDetailsActionType.SET_NOTE_DATA_FROM_SERVER,\n    note: apiResponse\n  } as SetNoteDetailsFromServerAction)\n}\n\nexport const updateNoteTitleByFirstHeading = (firstHeading?: string): void => {\n  store.dispatch({\n    type: NoteDetailsActionType.UPDATE_NOTE_TITLE_BY_FIRST_HEADING,\n    firstHeading: firstHeading\n  } as UpdateNoteTitleByFirstHeadingAction)\n}\n\nexport const setNoteFrontmatter = (frontmatter: NoteFrontmatter | undefined): void => {\n  if (!frontmatter) {\n    frontmatter = initialState.frontmatter\n  }\n  store.dispatch({\n    type: NoteDetailsActionType.SET_NOTE_FRONTMATTER,\n    frontmatter: frontmatter\n  } as SetNoteFrontmatterFromRenderingAction)\n}\n\nexport const setCheckboxInMarkdownContent = (lineInMarkdown: number, checked: boolean): void => {\n  store.dispatch({\n    type: NoteDetailsActionType.SET_CHECKBOX_IN_MARKDOWN_CONTENT,\n    checked: checked,\n    lineInMarkdown: lineInMarkdown\n  } as SetCheckboxInMarkdownContentAction)\n}\n","/*\n * SPDX-FileCopyrightText: 2021 The HedgeDoc developers (see AUTHORS file)\n *\n * SPDX-License-Identifier: AGPL-3.0-only\n */\n\nimport { useEffect } from 'react'\nimport { useIsDarkModeActivated } from './use-is-dark-mode-activated'\n\nexport const useApplyDarkMode = (): void => {\n  const darkModeActivated = useIsDarkModeActivated()\n\n  useEffect(() => {\n    if (darkModeActivated) {\n      window.document.body.classList.add('dark')\n    } else {\n      window.document.body.classList.remove('dark')\n    }\n    return () => {\n      window.document.body.classList.remove('dark')\n    }\n  }, [darkModeActivated])\n}\n"],"sourceRoot":""}