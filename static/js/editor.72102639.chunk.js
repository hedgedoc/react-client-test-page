(this.webpackJsonpreact_client=this.webpackJsonpreact_client||[]).push([[10],{1077:function(e,t,n){},1078:function(e,t,n){},1079:function(e,t,n){},1080:function(e,t,n){},1081:function(e,t,n){},1091:function(e,t,n){},1092:function(e,t,n){},1093:function(e,t,n){},1094:function(e,t,n){},1095:function(e,t,n){},1096:function(e,t,n){},1097:function(e,t,n){},1611:function(e,t,n){"use strict";n.r(t),n.d(t,"ScrollSource",(function(){return Bn})),n.d(t,"EditorPage",(function(){return Jn}));var r,c=n(9),i=n(0),a=n(62),o=n(389),s=n(591),l=n(358),u=n(335),d=n(170),j=n(17),b=n(592),f=n(593),h=n(967),O=n(166),m=n(6),x=n(162),p=(n(1050),n(390),n(1051),n(1052),n(1053),n(1054),n(1055),n(1056),n(456),n(1057),n(596),n(1058),n(1059),n(1060),n(1061),n(1062),n(1065),n(1066),n(1067),n(1068),n(1069),n(1070),n(1075)),v=n(115),g=n(67),y=n(34),C=n(71),w=n(1),E=function(e){var t=e.show,n=e.onHide,r=e.maxLength;return Object(a.a)(),Object(w.jsxs)(C.a,{"data-cy":"limitReachedModal",show:t,onHide:n,titleI18nKey:"editor.error.limitReached.title",closeButton:!0,children:[Object(w.jsxs)(v.a.Body,{children:[Object(w.jsx)(y.a,{i18nKey:"editor.error.limitReached.description",values:{maxLength:r}}),Object(w.jsx)("strong",{className:"mt-2 d-block",children:Object(w.jsx)(y.a,{i18nKey:"editor.error.limitReached.advice"})})]}),Object(w.jsx)(v.a.Footer,{children:Object(w.jsx)(g.a,{onClick:n,children:Object(w.jsx)(y.a,{i18nKey:"common.close"})})})]})},k=n(8),N=n.n(k),T=n(18),S=n(283),I=n.n(S),R=n(32),L=n(105),D=/^```((\w|-|_|\+)*)$/,M=[],K=function(){var e=Object(T.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([n.e(2),n.e(25)]).then(n.bind(null,1212));case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),Object(R.c)(L.a.t("common.errorOccurred"),L.a.t("common.errorWhileLoadingLibrary",{name:"highlight.js"}),R.a,"exclamation-circle"),console.error("can't load highlight js",e.t0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),P=function(e){var t=ge(e),n=D.exec(t.text);return null===n?null:{searchTerm:n[1],startIndex:t.start,endIndex:t.end}},B=function(){var e=Object(T.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",[]);case 5:return 0===M.length&&(M=t.default.listLanguages().concat("csv","flow","html","js","markmap","abc","graphviz","mermaid","vega-lite")),e.abrupt("return",M);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F={wordRegExp:D,hint:function(){var e=Object(T.a)(N.a.mark((function e(t){var n,r,c,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=P(t)){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,B();case 5:if(0!==(r=e.sent).length){e.next=8;break}return e.abrupt("return",null);case 8:if(c=ye(n.searchTerm,r)){e.next=11;break}return e.abrupt("return",null);case 11:return i=t.getCursor().line,e.abrupt("return",{list:c.map((function(e){return{text:"```"+e+"\n\n```\n",displayText:e}})),from:Object(S.Pos)(i,n.startIndex),to:Object(S.Pos)(i,n.endIndex)});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},H=/^(<d(?:e|et|eta|etai|etail|etails)?)$/,W={wordRegExp:H,hint:function(e){return new Promise((function(t){var n=ge(e);if(null!==H.exec(n.text)){var r=["<details>\n  <summary>Toggle label</summary>\n  Toggled content\n</details>"],c=e.getCursor();t(r?{list:r.map((function(e){return{text:e}})),from:Object(S.Pos)(c.line,n.start),to:Object(S.Pos)(c.line,n.end+1)}:null)}else t(null)}))}},A=n(597),V=/^:::((\w|-|_|\+)*)$/,U=A.b.map((function(e){return{text:":::"+e+"\n\n::: \n",displayText:e}})).concat({text:":::spoiler Toggle label\nToggled content\n::: \n",displayText:"spoiler"}),_={wordRegExp:V,hint:function(e){return new Promise((function(t){var n=ge(e),r=V.exec(n.text);if(null!==r){var c=e.getCursor();t(U?{list:U.filter((function(e){var t;return null===(t=e.displayText)||void 0===t?void 0:t.startsWith(r[1])})),from:Object(S.Pos)(c.line,n.start),to:Object(S.Pos)(c.line,n.end)}:null)}else t(null)}))}},G=n(392),z=n(1076),q=n(1615),$=n(164),X=(n(1077),n.p+"static/media/forkawesome.da7d0f53.png"),Y=n(599),J={customEmoji:Object.keys(Y.a).map((function(e){return{name:"fa-".concat(e),shortcodes:["fa-".concat(e.toLowerCase())],url:X,category:"ForkAwesome"}})),dataSource:"/static/js/emoji-data.json"},Q=function(e){var t=e.show,n=e.onEmojiSelected,r=e.onDismiss,c=Object($.a)(),a=Object(i.useRef)(null),o=Object(i.useRef)();return Object(q.a)(a,(function(){r()})),Object(i.useEffect)((function(){if(a.current){var e=new z.a(J);return e.shadowRoot&&e.shadowRoot.appendChild(function(){var e=document.createElement("style");return e.textContent='section.picker { --font-family: "Twemoji" !important; }',e}()),a.current.appendChild(e),o.current=e,function(){e.remove(),o.current=void 0}}}),[]),Object(i.useEffect)((function(){if(o.current){var e=function(e){n(e.detail)},t=o.current;return t.addEventListener("emoji-click",e,!0),function(){t.removeEventListener("emoji-click",e,!0)}}}),[n]),Object(i.useEffect)((function(){o.current&&(o.current.setAttribute("class",c?"dark":"light"),c?o.current.removeAttribute("style"):o.current.setAttribute("style","--background: #f8f9fa"))}),[c]),Object(w.jsx)("div",{className:"position-absolute emoji-picker-container ".concat(t?"":"d-none"),ref:a})},Z=function(e){if(e.emoji.shortcodes){var t="";return e.emoji.skins&&0!==e.skinTone&&(t=":skin-tone-".concat(e.skinTone,":")),":".concat(e.emoji.shortcodes[0],":").concat(t)}},ee=new G.a(J),te=/^:([\w-_+]*)$/,ne=function(){var e=Object(T.a)(N.a.mark((function e(t,n){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,""!==n){e.next=5;break}return e.next=4,t.getTopFavoriteEmoji(7);case 4:return e.abrupt("return",e.sent);case 5:return e.next=7,t.getEmojiBySearchQuery(n);case 7:if(0!==(r=e.sent).length){e.next=14;break}return e.next=11,t.getTopFavoriteEmoji(7);case 11:return e.abrupt("return",e.sent);case 14:return e.abrupt("return",r);case 15:e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",[]);case 21:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,n){return e.apply(this,arguments)}}(),re=function(e){var t=Z(e);if(t)return{text:t,render:function(n){var r,c=document.createElement("div");c.innerHTML="".concat((r=e,r.unicode?r.unicode:r.name?'<i class="fa '.concat(r.name,'"></i>'):""),"   ").concat(t),n.appendChild(c)}}},ce=function(){var e=Object(T.a)(N.a.mark((function e(t){var n,r,c,i,a,o,s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=ge(t),null!==(r=te.exec(n.text))){e.next=4;break}return e.abrupt("return",null);case 4:return e.next=6,ne(ee,r[1]);case 6:return c=e.sent,i=t.getCursor(),e.next=10,ee.getPreferredSkinTone();case 10:return a=e.sent,o=c.filter((function(e){return!!e.shortcodes})).map((function(e){return{emoji:e,skinTone:a,unicode:e.unicode?e.unicode:void 0,name:e.name}})),s=o.map(re).filter((function(e){return!!e})),e.abrupt("return",{list:s,from:Object(S.Pos)(i.line,n.start),to:Object(S.Pos)(i.line,n.end)});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie={wordRegExp:te,hint:ce},ae=/^(\s{0,3})(#{1,6})$/,oe=["# h1","## h2","### h3","#### h4","##### h5","###### h6","###### tags: `example`"],se=["# ","## ","### ","#### ","##### ","###### ","###### tags: `example`"],le={wordRegExp:ae,hint:function(e){return new Promise((function(t){var n=ge(e),r=ae.exec(n.text);if(null!==r){var c=r[0];if(c){var i=ye(c,oe),a=e.getCursor();t(i?{list:i.map((function(e){return{text:se[oe.indexOf(e)],displayText:e}})),from:Object(S.Pos)(a.line,n.start),to:Object(S.Pos)(a.line,n.end)}:null)}else t(null)}else t(null)}))}},ue=/^(!(\[.*])?)$/,de=['![image alt](https:// "title")','![image alt](https:// "title" =WidthxHeight)',"![image alt][reference]"],je={wordRegExp:ue,hint:function(e){return new Promise((function(t){var n=ge(e);if(null!==ue.exec(n.text)){var r=de,c=e.getCursor();t(r?{list:r.map((function(e){return{text:e}})),from:Object(S.Pos)(c.line,n.start),to:Object(S.Pos)(c.line,n.end+1)}:null)}else t(null)}))}},be=n(29),fe=n(87),he=/^(\[(.*])?)$/,Oe=['[link text](https:// "title")','[reference]: https:// "title"',"[link text][reference]","[reference]","[^footnote reference]: https://","[^footnote reference]","^[inline footnote]","[TOC]","name","time","[color=#FFFFFF]"],me={wordRegExp:he,hint:function(e){return new Promise((function(t){var n=ge(e);if(null!==he.exec(n.text)){var r=Oe,c=e.getCursor();t(r?{list:r.map((function(e){var t=Object(fe.b)(),n=t?t.name:"Anonymous";switch(e){case"name":return{text:"[name=".concat(n,"]")};case"time":return{text:"[time=".concat(be.DateTime.local().toFormat("DDDD T"),"]")};default:return{text:e+" ",displayText:e}}})),from:Object(S.Pos)(c.line,n.start),to:Object(S.Pos)(c.line,n.end+1)}:null)}else t(null)}))}},xe=/^({[%}]?)$/,pe={wordRegExp:xe,hint:function(e){return new Promise((function(t){var n=ge(e);if(null!==xe.exec(n.text)){var r=["{%pdf https:// %}"],c=e.getCursor();t(r?{list:r.map((function(e){return{text:e}})),from:Object(S.Pos)(c.line,n.start),to:Object(S.Pos)(c.line,n.end+1)}:null)}else t(null)}))}},ve=/[^\s]/,ge=function(e){for(var t=e.getCursor(),n=e.getLine(t.line),r=t.ch,c=t.ch;r&&ve.test(n.charAt(r-1));)--r;for(;c<n.length&&ve.test(n.charAt(c));)++c;return{text:n.slice(r,c).toLowerCase(),start:r,end:c}},ye=function(e,t){var n=e.toLowerCase();return t.filter((function(e){return e.toLowerCase().startsWith(n)})).slice(0,7)},Ce=[F,_,ie,le,je,me,pe,W],we=(n(1078),n(594)),Ee=function(e){return Array.from(Array(e).keys())},ke=function(e){return Re(e,"**")},Ne=function(e){return Re(e,"*")},Te=function(e){return Re(e,"~~")},Se=function(e){return Re(e,"++")},Ie=function(e){return Re(e,"==")},Re=function(e,t,n){if(e.getSelection()){var r,c=e.listSelections(),i=Object(x.a)(c);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(!a.empty()){var o=a.from(),s=a.to(),l=e.getRange(o,s);e.replaceRange(t+l+(n||t),o,s,"+input"),a.head.ch+=t.length,a.anchor.ch+=n?n.length:t.length}}}catch(u){i.e(u)}finally{i.f()}e.setSelections(c)}},Le=function(e,t,n){if(!e.getSelection()){var r=e.getCursor(),c=r.line,i=e.getLine(c),a=/\s*\\n/.exec(i)?"".concat(t).concat(null!==n&&void 0!==n?n:""):"".concat(t).concat(i).concat(null!==n&&void 0!==n?n:"");e.replaceRange(a,{line:r.line,ch:0},{line:r.line,ch:i.length},"+input")}Re(e,t,null!==n&&void 0!==n?n:t)},De=function(e,t){var n,r=e.getCursor(),c=e.listSelections(),i=Object(x.a)(c);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=a.empty()?{line:r.line,ch:0}:a.from(),s=a.empty()?{line:r.line,ch:e.getLine(r.line).length}:a.to(),l=e.getRange(o,s).split("\n");e.replaceRange(l.map((function(e){return"".concat(t).concat(e)})).join("\n"),o,s,"+input")}}catch(u){i.e(u)}finally{i.f()}e.setSelections(c)},Me=function(e,t){var n,r=e.getCursor(),c=e.listSelections(),i=Object(x.a)(c);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=a.empty()?r.line:a.from().line,s=e.getLine(o);e.replaceRange(t(s),{line:o,ch:0},{line:o,ch:s.length},"+input")}}catch(l){i.e(l)}finally{i.f()}e.setSelections(c)},Ke=function(e,t){var n,r=e.getCursor(),c=e.listSelections(),i=Object(x.a)(c);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=a.empty()?{line:r.line,ch:0}:a.from(),s=a.empty()?{line:r.line,ch:e.getLine(r.line).length}:a.to(),l=e.getRange(o,s).split("\n");e.replaceRange(l.map((function(e,n){return"".concat(t(n+1)).concat(e)})).join("\n"),o,s,"+input")}}catch(u){i.e(u)}finally{i.f()}e.setSelections(c)},Pe=function(e,t){var n,r=e.getCursor(),c=e.listSelections(),i=Object(x.a)(c);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=a.empty()?{line:r.line,ch:r.ch}:a.from(),s=a.empty()?{line:r.line,ch:r.ch}:a.to(),l=e.getRange(o,s);/^(?:https?|ftp|mailto):/.exec(l)?e.replaceRange("".concat(t||"","[](").concat(l,")"),o,s,"+input"):e.replaceRange("".concat(t||"","[").concat(l,"](https://)"),o,s,"+input")}}catch(u){i.e(u)}finally{i.f()}},Be=function(e,t){var n,r=e.getCursor(),c=e.listSelections(),i=Object(x.a)(c);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=a.empty()?{line:r.line,ch:r.ch}:a.from(),s=a.empty()?{line:r.line,ch:r.ch}:a.to();e.replaceRange("".concat(t),o,s,"+input")}}catch(l){i.e(l)}finally{i.f()}},Fe=function(e){return e.setOption("fullScreen",!e.getOption("fullScreen"))},He=function(e){if(!e.getOption("fullScreen")||"vim"===(null===(t=e.getOption("keyMap"))||void 0===t?void 0:t.substr(0,3)))return I.a.Pass;var t;e.setOption("fullScreen",!1)},We=function(){},Ae=function(e){var t,n,r=Array((null!==(t=e.getOption("indentUnit"))&&void 0!==t?t:0)+1).join(" "),c=e.getCursor(),i=e.getLine(c.line);if(e.getSelection().split("\n").length>1||e.getSelections().length>1)e.execCommand("defaultTab");else if(null!==(n=/^(\s*)(>[> ]*|[*+-]\s|(\d+)([.)]))/.exec(i))){var a=n[1].length,o={line:c.line,ch:a};e.getOption("indentWithTabs")?e.replaceRange("\t",o,o,"+input"):e.replaceRange(r,o,o,"+input")}else e.getOption("indentWithTabs")?e.execCommand("defaultTab"):e.replaceSelection(r)},Ve=we.a?{F9:We,F10:Fe,Esc:He,"Cmd-S":We,Enter:"newlineAndIndentContinueMarkdownList",Tab:Ae,"Cmd-Left":"goLineLeftSmart","Cmd-Right":"goLineRight",Home:"goLineLeftSmart",End:"goLineRight","Cmd-I":Ne,"Cmd-B":ke,"Cmd-U":Se,"Cmd-D":Te,"Cmd-M":Ie}:{F9:We,F10:Fe,Esc:He,"Ctrl-S":We,Enter:"newlineAndIndentContinueMarkdownList",Tab:Ae,Home:"goLineLeftSmart",End:"goLineRight","Ctrl-I":Ne,"Ctrl-B":ke,"Ctrl-U":Se,"Ctrl-D":Te,"Ctrl-M":Ie,"Ctrl-K":Pe},Ue=(n(1079),{position:{line:0,ch:0},selectedColumns:0,selectedLines:0,linesInDocument:0,charactersInDocument:0,remainingCharacters:0}),_e=function(e,t){return{position:e.getCursor(),charactersInDocument:e.getValue().length,remainingCharacters:t-e.getValue().length,linesInDocument:e.lineCount(),selectedColumns:e.getSelection().length,selectedLines:e.getSelection().split("\n").length}},Ge=function(e){var t=e.position,n=e.selectedColumns,r=e.selectedLines,c=e.charactersInDocument,o=e.linesInDocument,s=e.remainingCharacters,l=Object(a.a)().t,u=Object(i.useMemo)((function(){return 0===s?l("editor.statusBar.lengthTooltip.maximumReached"):s<0?l("editor.statusBar.lengthTooltip.exceeded",{exceeded:-s}):l("editor.statusBar.lengthTooltip.remaining",{remaining:s})}),[s,l]);return Object(w.jsxs)("div",{className:"d-flex flex-row status-bar px-2",children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("span",{children:l("editor.statusBar.cursor",{line:t.line+1,columns:t.ch+1})}),Object(w.jsxs)(j.a,{condition:0!==n&&0!==r,children:[Object(w.jsx)(j.a,{condition:1===r,children:Object(w.jsxs)("span",{children:["\xa0\u2013\xa0",l("editor.statusBar.selection.column",{count:n})]})}),Object(w.jsx)(j.a,{condition:r>1,children:Object(w.jsxs)("span",{children:["\xa0\u2013\xa0",l("editor.statusBar.selection.line",{count:r})]})})]})]}),Object(w.jsxs)("div",{className:"ml-auto",children:[Object(w.jsx)("span",{children:l("editor.statusBar.lines",{lines:o})}),"\xa0\u2013\xa0",Object(w.jsx)("span",{"data-cy":"remainingCharacters",title:u,className:s<=0?"text-danger":s<=100?"text-warning":"",children:l("editor.statusBar.length",{length:c})})]})]})},ze=n(1599),qe=n(206),$e=n(15),Xe=n(57),Ye=n(281),Je=n(163),Qe=n(43);!function(e){e[e.SELECT=0]="SELECT",e[e.BOOLEAN=1]="BOOLEAN",e[e.NUMBER=2]="NUMBER"}(r||(r={}));var Ze,et=function(e){var t=e.property,n=e.type,c=e.onChange,i=e.value,o=e.children;return Object(a.a)(),Object(w.jsxs)(Xe.a.Group,{controlId:"editor-pref-".concat(t),children:[Object(w.jsx)(Xe.a.Label,{children:Object(w.jsx)(y.a,{i18nKey:"editor.modal.preferences.".concat(t).concat(n===r.NUMBER?"":".label")})}),Object(w.jsx)(Xe.a.Control,{as:n===r.NUMBER?"input":"select",size:"sm",value:i,onChange:c,type:n===r.NUMBER?"number":"",children:o})]})},tt=n(16),nt=function(e){var t=e.property,n=Object(tt.a)((function(e){var n,r;return null!==(n=null===(r=e.editorConfig.preferences[t])||void 0===r?void 0:r.toString())&&void 0!==n?n:""})),c=Object(a.a)().t,o=Object(i.useCallback)((function(e){var n="true"===e.target.value;Object(Qe.b)(Object(Je.a)({},t,n))}),[t]),s="editor.modal.preferences.".concat(t);return Object(w.jsxs)(et,{onChange:o,property:t,type:r.SELECT,value:n,children:[Object(w.jsx)("option",{value:"true",children:c("".concat(s,".on"))}),Object(w.jsx)("option",{value:"false",children:c("".concat(s,".off"))})]})},rt=function(){var e=Object(tt.a)((function(e){return Boolean(e.editorConfig.ligatures).toString()})),t=Object(i.useCallback)((function(e){var t="true"===e.target.value;Object(Qe.d)(t)}),[]),n=Object(a.a)().t;return Object(w.jsxs)(et,{onChange:t,value:e,property:"ligatures",type:r.BOOLEAN,children:[Object(w.jsx)("option",{value:"true",children:n("common.yes")}),Object(w.jsx)("option",{value:"false",children:n("common.no")})]})},ct=function(e){var t=e.property,n=Object(tt.a)((function(e){var n,r;return null!==(n=null===(r=e.editorConfig.preferences[t])||void 0===r?void 0:r.toString())&&void 0!==n?n:""})),c=Object(i.useCallback)((function(e){var n=Number.parseInt(e.target.value);Object(Qe.b)(Object(Je.a)({},t,n))}),[t]);return Object(w.jsx)(et,{onChange:c,property:t,type:r.NUMBER,value:n})};!function(e){e.KEYMAP="keyMap",e.THEME="theme",e.INDENT_WITH_TABS="indentWithTabs",e.INDENT_UNIT="indentUnit",e.SPELL_CHECK="spellcheck"}(Ze||(Ze={}));var it,at=function(e){var t=e.property,n=e.selections,c=Object(tt.a)((function(e){var n,r;return null!==(n=null===(r=e.editorConfig.preferences[t])||void 0===r?void 0:r.toString())&&void 0!==n?n:""})),o=Object(a.a)().t,s=Object(i.useCallback)((function(e){var n=e.target.value;Object(Qe.b)(Object(Je.a)({},t,n))}),[t]),l="editor.modal.preferences.".concat(t);return Object(w.jsx)(et,{onChange:s,property:t,type:r.SELECT,value:c,children:n.map((function(e){return Object(w.jsx)("option",{value:e,children:o("".concat(l,".").concat(e))},e)}))})},ot=function(){var e=Object(tt.a)((function(e){return Boolean(e.editorConfig.smartPaste).toString()})),t=Object(i.useCallback)((function(e){var t="true"===e.target.value;Object(Qe.f)(t)}),[]),n=Object(a.a)().t;return Object(w.jsxs)(et,{onChange:t,value:e,property:"smartPaste",type:r.BOOLEAN,children:[Object(w.jsx)("option",{value:"true",children:n("common.yes")}),Object(w.jsx)("option",{value:"false",children:n("common.no")})]})},st=function(){var e=Object(a.a)().t,t=Object(i.useState)(!1),n=Object(c.a)(t,2),o=n[0],s=n[1],l=Object(tt.a)((function(e){var t;return null!==(t=e.editorConfig.preferences.indentWithTabs)&&void 0!==t&&t}));return Object(w.jsxs)(i.Fragment,{children:[Object(w.jsx)(g.a,{variant:"light",onClick:function(){return s(!0)},title:e("editor.editorToolbar.preferences"),children:Object(w.jsx)($e.a,{icon:"wrench"})}),Object(w.jsx)(C.a,{show:o,onHide:function(){return s(!1)},titleI18nKey:"editor.modal.preferences.title",closeButton:!0,icon:"wrench",children:Object(w.jsx)(Xe.a,{children:Object(w.jsxs)(Ye.a,{children:[Object(w.jsx)(Ye.a.Item,{children:Object(w.jsx)(at,{property:Ze.THEME,selections:["one-dark","neat"]})}),Object(w.jsx)(Ye.a.Item,{children:Object(w.jsx)(at,{property:Ze.KEYMAP,selections:["sublime","emacs","vim"]})}),Object(w.jsx)(Ye.a.Item,{children:Object(w.jsx)(nt,{property:Ze.INDENT_WITH_TABS})}),Object(w.jsx)(j.a,{condition:!l,children:Object(w.jsx)(Ye.a.Item,{children:Object(w.jsx)(ct,{property:Ze.INDENT_UNIT})})}),Object(w.jsx)(Ye.a.Item,{children:Object(w.jsx)(rt,{})}),Object(w.jsx)(Ye.a.Item,{children:Object(w.jsx)(ot,{})}),Object(w.jsx)(Ye.a.Item,{children:Object(w.jsxs)(et,{onChange:function(){return alert("This feature is not yet implemented.")},property:Ze.SPELL_CHECK,type:r.SELECT,children:[Object(w.jsx)("option",{value:"off",children:"Off"}),Object(w.jsx)("option",{value:"en",children:"English"})]})})]})})})]})},lt=function(e){var t=e.editor,n=Object(a.a)().t,r=Object(i.useState)(!1),o=Object(c.a)(r,2),s=o[0],l=o[1];return Object(w.jsxs)(i.Fragment,{children:[Object(w.jsx)(Q,{show:s,onEmojiSelected:function(e){l(!1),function(e,t){var n=Z(e);n&&Be(t,n)}(e,t)},onDismiss:function(){return l(!1)}}),Object(w.jsx)(g.a,{"data-cy":"show-emoji-picker",variant:"light",onClick:function(){return l((function(e){return!e}))},title:n("editor.editorToolbar.emoji"),children:Object(w.jsx)($e.a,{icon:"smile-o"})})]})},ut=n(207),dt=function(e){var t=e.showModal,n=e.onDismiss,r=e.onTablePicked,o=Object(a.a)().t,s=Object(i.useState)({rows:0,columns:0}),l=Object(c.a)(s,2),u=l[0],d=l[1];Object(i.useEffect)((function(){d({rows:0,columns:0})}),[t]);var j=Object(i.useCallback)((function(){r(u.rows,u.columns),n()}),[n,u,r]);return Object(w.jsxs)(C.a,{show:t,onHide:function(){return n()},titleI18nKey:"editor.editorToolbar.table.customSize",closeButton:!0,icon:"table",children:[Object(w.jsxs)("div",{className:"col-lg-10 d-flex flex-row p-3 align-items-center",children:[Object(w.jsx)(Xe.a.Control,{type:"number",min:1,placeholder:o("editor.editorToolbar.table.cols"),isInvalid:u.columns<=0,onChange:function(e){var t=Number.parseInt(e.currentTarget.value);d((function(e){return{rows:e.rows,columns:isNaN(t)?0:t}}))}}),Object(w.jsx)($e.a,{icon:"times",className:"mx-2",fixedWidth:!0}),Object(w.jsx)(Xe.a.Control,{type:"number",min:1,placeholder:o("editor.editorToolbar.table.rows"),isInvalid:u.rows<=0,onChange:function(e){var t=Number.parseInt(e.currentTarget.value);d((function(e){return{rows:isNaN(t)?0:t,columns:e.columns}}))}})]}),Object(w.jsx)(ut.a,{children:Object(w.jsx)(g.a,{onClick:j,disabled:u.rows<=0||u.columns<=0,children:o("editor.editorToolbar.table.create")})})]})},jt=(n(1080),function(e){var t=e.show,n=e.onDismiss,r=e.onTablePicked,o=Object(a.a)().t,s=Object(i.useRef)(null),l=Object(i.useState)(),u=Object(c.a)(l,2),d=u[0],j=u[1],b=Object(i.useState)(!1),f=Object(c.a)(b,2),h=f[0],O=f[1];Object(q.a)(s,(function(){n()})),Object(i.useEffect)((function(){j(void 0)}),[t]);var m=Object(i.useCallback)((function(){d&&r(d.rows,d.columns)}),[r,d]);return Object(w.jsxs)("div",{className:"position-absolute table-picker-container p-2 ".concat(!t||h?"d-none":""," bg-light"),ref:s,role:"grid",children:[Object(w.jsx)("p",{className:"lead",children:d?o("editor.editorToolbar.table.size",{cols:null===d||void 0===d?void 0:d.columns,rows:d.rows}):o("editor.editorToolbar.table.title")}),Object(w.jsx)("div",{className:"table-container",children:Ee(8).map((function(e){return Ee(10).map((function(t){return Object(w.jsx)("div",{className:"table-cell ".concat(d&&e<d.rows&&t<d.columns?"bg-primary border-primary":""),onMouseEnter:function(){j({rows:e+1,columns:t+1})},title:o("editor.editorToolbar.table.size",{cols:t+1,rows:e+1}),onClick:m},"".concat(e,"_").concat(t))}))}))}),Object(w.jsxs)("div",{className:"d-flex justify-content-center mt-2",children:[Object(w.jsxs)(g.a,{"data-cy":"show-custom-table-modal",className:"text-center",onClick:function(){return O(!0)},children:[Object(w.jsx)($e.a,{icon:"table"}),"\xa0",o("editor.editorToolbar.table.customSize")]}),Object(w.jsx)(dt,{showModal:h,onDismiss:function(){return O(!1)},onTablePicked:r})]})]})}),bt=function(e){var t=e.editor,n=Object(a.a)().t,r=Object(i.useState)(!1),o=Object(c.a)(r,2),s=o[0],l=o[1];return Object(w.jsxs)(i.Fragment,{children:[Object(w.jsx)(jt,{show:s,onDismiss:function(){return l(!1)},onTablePicked:function(e,n){l(!1),function(e,t,n){var r=Ee(t),c=Ee(n).map((function(e){return e+1})),i="|  # "+c.join(" |  # ")+" |",a="| "+c.map((function(){return"----"})).join(" | ")+" |",o=r.map((function(){return"| "+c.map((function(){return"Text"})).join(" | ")+" |"})).join("\n"),s="".concat(i,"\n").concat(a,"\n").concat(o);Me(e,(function(e){return"".concat(e,"\n").concat(s)}))}(t,e,n)}}),Object(w.jsx)(g.a,{"data-cy":"show-table-overlay",variant:"light",onClick:function(){return l((function(e){return!e}))},title:n("editor.editorToolbar.table.title"),children:Object(w.jsx)($e.a,{icon:"table"})})]})},ft=(n(1081),n(51)),ht=["onLoad","acceptedFiles","onClickRef"],Ot=function(e){var t=e.onLoad,n=e.acceptedFiles,r=e.onClickRef,c=Object(ft.a)(e,ht),a=Object(i.useRef)(null),o=Object(i.useCallback)((function(){var e=a.current;e&&(e.addEventListener("change",(function(){if(e.files&&!(e.files.length<1)){var n=e.files[0];t(n).then((function(){e.value=""})).catch((function(e){console.error(e)}))}})),e.click())}),[t]);return Object(i.useEffect)((function(){r.current=o})),Object(w.jsx)("input",{"data-cy":c["data-cy"],type:"file",ref:a,className:"d-none",accept:n})},mt=n(196),xt=n(21),pt=["image/apng","image/bmp","image/gif","image/heif","image/heic","image/heif-sequence","image/heic-sequence","image/jpeg","image/png","image/svg+xml","image/tiff","image/webp"],vt=function(e,t){if(e&&pt.includes(e.type)){var n=t.getCursor(),r="![".concat(L.a.t("editor.upload.uploadFile",{fileName:e.name}),"]()"),c=xt.a.getState().noteDetails.id,i=function(e){t.replaceRange(e,n,{line:n.line,ch:n.ch+r.length},"+input")};t.replaceRange(r,n,n,"+input"),Object(mt.b)(c,e).then((function(e){var t=e.link;i("![](".concat(t,")"))})).catch((function(e){console.error("error while uploading file",e),i("")}))}},gt=pt.join(", "),yt=function(e){var t=e.editor,n=Object(a.a)().t,r=Object(i.useRef)(),c=Object(i.useCallback)((function(){var e;null===(e=r.current)||void 0===e||e.call(r)}),[]),o=Object(i.useCallback)((function(e){return t&&vt(e,t),Promise.resolve()}),[t]);return t?Object(w.jsxs)(i.Fragment,{children:[Object(w.jsx)(g.a,{variant:"light",onClick:c,title:n("editor.editorToolbar.uploadImage"),children:Object(w.jsx)($e.a,{icon:"upload"})}),Object(w.jsx)(Ot,{onLoad:o,acceptedFiles:gt,onClickRef:r})]}):null},Ct=function(e){var t=e.editor,n=Object(a.a)().t;return t?Object(w.jsxs)(ze.a,{className:"bg-light",children:[Object(w.jsxs)(qe.a,{className:"mx-1 flex-wrap",children:[Object(w.jsx)(g.a,{"data-cy":"format-bold",variant:"light",onClick:function(){return ke(t)},title:n("editor.editorToolbar.bold"),children:Object(w.jsx)($e.a,{icon:"bold"})}),Object(w.jsx)(g.a,{"data-cy":"format-italic",variant:"light",onClick:function(){return Ne(t)},title:n("editor.editorToolbar.italic"),children:Object(w.jsx)($e.a,{icon:"italic"})}),Object(w.jsx)(g.a,{"data-cy":"format-underline",variant:"light",onClick:function(){return Se(t)},title:n("editor.editorToolbar.underline"),children:Object(w.jsx)($e.a,{icon:"underline"})}),Object(w.jsx)(g.a,{"data-cy":"format-strikethrough",variant:"light",onClick:function(){return Te(t)},title:n("editor.editorToolbar.strikethrough"),children:Object(w.jsx)($e.a,{icon:"strikethrough"})}),Object(w.jsx)(g.a,{"data-cy":"format-subscript",variant:"light",onClick:function(){return function(e){return Re(e,"~")}(t)},title:n("editor.editorToolbar.subscript"),children:Object(w.jsx)($e.a,{icon:"subscript"})}),Object(w.jsx)(g.a,{"data-cy":"format-superscript",variant:"light",onClick:function(){return function(e){return Re(e,"^")}(t)},title:n("editor.editorToolbar.superscript"),children:Object(w.jsx)($e.a,{icon:"superscript"})})]}),Object(w.jsxs)(qe.a,{className:"mx-1 flex-wrap",children:[Object(w.jsx)(g.a,{"data-cy":"format-heading",variant:"light",onClick:function(){return function(e){return Me(e,(function(e){return e.startsWith("#")?"#".concat(e):"# ".concat(e)}))}(t)},title:n("editor.editorToolbar.header"),children:Object(w.jsx)($e.a,{icon:"header"})}),Object(w.jsx)(g.a,{"data-cy":"format-code-block",variant:"light",onClick:function(){return function(e){return Le(e,"```\n","\n```")}(t)},title:n("editor.editorToolbar.code"),children:Object(w.jsx)($e.a,{icon:"code"})}),Object(w.jsx)(g.a,{"data-cy":"format-block-quote",variant:"light",onClick:function(){return function(e){return De(e,"> ")}(t)},title:n("editor.editorToolbar.blockquote"),children:Object(w.jsx)($e.a,{icon:"quote-right"})}),Object(w.jsx)(g.a,{"data-cy":"format-unordered-list",variant:"light",onClick:function(){return function(e){return Ke(e,(function(){return"- "}))}(t)},title:n("editor.editorToolbar.unorderedList"),children:Object(w.jsx)($e.a,{icon:"list"})}),Object(w.jsx)(g.a,{"data-cy":"format-ordered-list",variant:"light",onClick:function(){return function(e){return Ke(e,(function(e){return"".concat(e,". ")}))}(t)},title:n("editor.editorToolbar.orderedList"),children:Object(w.jsx)($e.a,{icon:"list-ol"})}),Object(w.jsx)(g.a,{"data-cy":"format-check-list",variant:"light",onClick:function(){return function(e){return Ke(e,(function(){return"- [ ] "}))}(t)},title:n("editor.editorToolbar.checkList"),children:Object(w.jsx)($e.a,{icon:"check-square"})})]}),Object(w.jsxs)(qe.a,{className:"mx-1 flex-wrap",children:[Object(w.jsx)(g.a,{"data-cy":"format-link",variant:"light",onClick:function(){return Pe(t)},title:n("editor.editorToolbar.link"),children:Object(w.jsx)($e.a,{icon:"link"})}),Object(w.jsx)(g.a,{"data-cy":"format-image",variant:"light",onClick:function(){return function(e){return Pe(e,"!")}(t)},title:n("editor.editorToolbar.image"),children:Object(w.jsx)($e.a,{icon:"picture-o"})}),Object(w.jsx)(yt,{editor:t})]}),Object(w.jsxs)(qe.a,{className:"mx-1 flex-wrap",children:[Object(w.jsx)(bt,{editor:t}),Object(w.jsx)(g.a,{"data-cy":"format-add-line",variant:"light",onClick:function(){return function(e){return Me(e,(function(e){return"".concat(e,"\n----")}))}(t)},title:n("editor.editorToolbar.line"),children:Object(w.jsx)($e.a,{icon:"minus"})}),Object(w.jsx)(g.a,{"data-cy":"format-collapsable-block",variant:"light",onClick:function(){return function(e){return Me(e,(function(e){return"".concat(e,"\n:::spoiler Toggle label\n  Toggled content\n:::")}))}(t)},title:n("editor.editorToolbar.collapsableBlock"),children:Object(w.jsx)($e.a,{icon:"caret-square-o-down"})}),Object(w.jsx)(g.a,{"data-cy":"format-add-comment",variant:"light",onClick:function(){return function(e){return Me(e,(function(e){return"".concat(e,"\n> []")}))}(t)},title:n("editor.editorToolbar.comment"),children:Object(w.jsx)($e.a,{icon:"comment"})}),Object(w.jsx)(lt,{editor:t})]}),Object(w.jsx)(qe.a,{className:"mx-1 flex-wrap",children:Object(w.jsx)(st,{})})]}):null},wt=n(85),Et=function(e,t){var n=e.clipboardData.getData("text");if(!n||function(e){for(var t=0,n=e.getCursor().line;n>=0;--n)e.getDoc().getLine(n).startsWith("```")&&t++;return t%2===1}(t)||!function(e){if(!e.includes("\n")||!e.includes("\t"))return!1;if(e.startsWith("```"))return!1;var t=e.split(/\r?\n/).filter((function(e){return""!==e.trim()}));if(t.every((function(e){return e.startsWith("\t")})))return!1;var n=t.map((function(e){var t,n;return null!==(t=null===(n=e.match(/\t/g))||void 0===n?void 0:n.length)&&void 0!==t?t:0}));return n.every((function(e){return e===n[0]}))}(n))return!1;e.preventDefault();var r=function(e){if(""===e.trim())return"";var t=e.split(/\r?\n/).filter((function(e){return""!==e.trim()})).reduce((function(e,t,n){return e[n]=t.split("\t"),e}),[]),n=Ee(t.length),r=Ee(Math.max.apply(Math,Object(wt.a)(t.map((function(e){return e.length}))))),c=r.map((function(e){return"| #".concat(e+1," ")})).join("")+"|",i=r.map((function(e){return"| -".concat("-".repeat((e+1).toString().length)," ")})).join("")+"|",a=n.map((function(e){return r.map((function(n){return"| "+t[e][n]+" "})).join("")+"|"})).join("\n");return"".concat(c,"\n").concat(i,"\n").concat(a)}(n);return Be(t,r),!0},kt=function(e){var t,n=Object(x.a)(Ce);try{for(n.s();!(t=n.n()).done;){var r=t.value,c=ge(e);if(r.wordRegExp.test(c.text))return void e.showHint({hint:r.hint,completeSingle:!1,completeOnSingleClick:!1,alignWithWord:!0})}}catch(i){n.e(i)}finally{n.f()}},Nt=function(e){var t=e.onContentChange,n=e.content,r=e.scrollState,o=e.onScroll,s=e.onMakeScrollSource,l=Object(a.a)().t,u=Object(tt.a)((function(e){return e.config.maxDocumentLength})),d=Object(tt.a)((function(e){return e.editorConfig.smartPaste})),j=Object(i.useState)(!1),b=Object(c.a)(j,2),f=b[0],h=b[1],O=Object(i.useRef)(!1),x=Object(i.useState)(),v=Object(c.a)(x,2),g=v[0],y=v[1],C=Object(i.useState)(Ue),k=Object(c.a)(C,2),N=k[0],T=k[1],S=Object(tt.a)((function(e){return e.editorConfig.preferences})),I=Object(tt.a)((function(e){return e.editorConfig.ligatures})),R=Object(i.useRef)(),L=Object(i.useState)(),D=Object(c.a)(L,2),M=D[0],K=D[1],P=Object(i.useCallback)((function(e,t){return K(t)}),[]),B=Object(i.useCallback)((function(e,t){if(t&&t.clipboardData){if(d)if(Et(t,e))return;!function(e,t){if(!e.clipboardData.files||e.clipboardData.files.length<1)return!1;e.preventDefault();var n=e.clipboardData.files;!!(n&&n.length>=1)&&vt(n[0],t)}(t,e)}}),[d]);Object(i.useEffect)((function(){if(g&&o&&M){var e=g.lineAtHeight(M.top,"local"),t=g.heightAtLine(e,"local"),n=g.lineInfo(e);if(null!==n){var r=n.handle.height,c=Math.max(M.top-t,0)/r,i=Math.floor(100*c);o({firstLineInView:e+1,scrolledPercentage:i})}}}),[g,M,o]),Object(i.useEffect)((function(){if(g&&r){var e=g.heightAtLine(r.firstLineInView-1,"local")+g.lineInfo(r.firstLineInView-1).handle.height*r.scrolledPercentage/100,t=Math.floor(e);t!==R.current&&(R.current=t,g.scrollTo(0,t))}}),[g,r]);var F=Object(i.useCallback)((function(e,n,r){r.length>u&&!O.current&&(h(!0),O.current=!0),r.length<=u&&(O.current=!1),t(r)}),[t,u,O]),H=Object(i.useCallback)((function(e){T(_e(e,u)),y(e)}),[u]),W=Object(i.useCallback)((function(e){T(_e(e,u))}),[u]),A=Object(i.useCallback)((function(e,t){if(t&&e&&t.pageX&&t.pageY&&t.dataTransfer&&t.dataTransfer.files&&t.dataTransfer.files.length>=1){t.preventDefault();var n=t.pageY,r=t.pageX,c=e.coordsChar({top:n,left:r},"page");e.setCursor(c);var i=t.dataTransfer.files;vt(i[0],e)}}),[]),V=Object(i.useCallback)((function(){return h(!1)}),[]),U=Object(i.useMemo)((function(){return Object(m.a)(Object(m.a)({},S),{},{mode:"gfm",viewportMargin:20,styleActiveLine:!0,lineNumbers:!0,lineWrapping:!0,showCursorWhenSelecting:!0,highlightSelectionMatches:!0,inputStyle:"textarea",matchBrackets:!0,autoCloseBrackets:!0,matchTags:{bothTags:!0},autoCloseTags:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","authorship-gutters","CodeMirror-foldgutter"],extraKeys:Ve,flattenSpans:!0,addModeClass:!0,autoRefresh:!0,placeholder:l("editor.placeholder")})}),[l,S]);return Object(w.jsxs)("div",{className:"d-flex flex-column h-100 position-relative",onMouseEnter:s,children:[Object(w.jsx)(E,{show:f,onHide:V,maxLength:u}),Object(w.jsx)(Ct,{editor:g}),Object(w.jsx)(p.Controlled,{className:"overflow-hidden w-100 flex-fill ".concat(I?"":"no-ligatures"),value:n,options:U,onChange:kt,onPaste:B,onDrop:A,onCursorActivity:W,editorDidMount:H,onBeforeChange:F,onScroll:P}),Object(w.jsx)(Ge,Object(m.a)({},N))]})},Tt=n(600),St=function(e){e.ctrlKey&&e.altKey&&"b"===e.key&&(Object(Qe.e)(O.a.BOTH),e.preventDefault()),e.ctrlKey&&e.altKey&&"v"===e.key&&(Object(Qe.e)(O.a.PREVIEW),e.preventDefault()),e.ctrlKey&&e.altKey&&("e"===e.key||"\u20ac"===e.key)&&(Object(Qe.e)(O.a.EDITOR),e.preventDefault())},It=n(174),Rt=n(88),Lt=["children","icon","className","variant","buttonRef","hide"],Dt=function(e){var t=e.children,n=e.icon,r=e.className,c=e.variant,i=e.buttonRef,a=e.hide,o=Object(ft.a)(e,Lt);return Object(w.jsxs)("button",Object(m.a)(Object(m.a)({ref:i,className:"sidebar-entry ".concat(a?"hide":""," ").concat(c?"sidebar-entry-".concat(c):""," ").concat(null!==r&&void 0!==r?r:"")},o),{},{children:[Object(w.jsx)(j.a,{condition:!!n,children:Object(w.jsx)("span",{className:"sidebar-icon",children:Object(w.jsx)($e.a,{icon:n})})}),Object(w.jsx)("span",{className:"sidebar-text",children:t})]}))},Mt=function(e){var t=e.hide,n=e.className;Object(a.a)();var r=Object(i.useState)(!1),o=Object(c.a)(r,2),s=o[0],l=o[1];return Object(w.jsxs)(i.Fragment,{children:[Object(w.jsx)(Dt,{icon:"trash",className:n,hide:t,onClick:function(){return l(!0)},children:Object(w.jsx)(y.a,{i18nKey:"landing.history.menu.deleteNote"})}),Object(w.jsxs)(Rt.a,{onConfirm:function(){return l(!1)},deletionButtonI18nKey:"editor.modal.deleteNote.button",show:s,onHide:function(){return l(!1)},titleI18nKey:"editor.modal.deleteNote.title",children:[Object(w.jsx)("h5",{children:Object(w.jsx)(y.a,{i18nKey:"editor.modal.deleteNote.question"})}),Object(w.jsx)("ul",{children:Object(w.jsx)("li",{children:" noteTitle"})}),Object(w.jsx)("h6",{children:Object(w.jsx)(y.a,{i18nKey:"editor.modal.deleteNote.warning"})})]})]})},Kt=n(458),Pt=n(968),Bt=function(e){var t=e.text,n=e.dataCy;return Object(w.jsx)("b",{className:"font-style-normal mr-1","data-cy":n,children:t})},Ft=n(116),Ht=n(118),Wt=function(){Object(a.a)();var e=Object(Ht.b)(),t=Object(i.useState)(null),n=Object(c.a)(t,2),r=n[0],o=n[1],s=Object(tt.a)((function(e){return e.editorConfig.rendererReady}));return Object(i.useEffect)((function(){return e.onWordCountCalculated((function(e){o(e)})),function(){e.onWordCountCalculated(void 0)}}),[e,o]),Object(i.useEffect)((function(){s&&e.sendGetWordCount()}),[e,s]),Object(w.jsxs)(Kt.a,{icon:"align-left",size:"2x",children:[Object(w.jsx)(j.a,{condition:null===r,children:Object(w.jsx)(y.a,{i18nKey:"common.loading"})}),Object(w.jsx)(j.a,{condition:null!==r,children:Object(w.jsx)(y.a,{i18nKey:"editor.modal.documentInfo.words",children:Object(w.jsx)(Bt,{text:null!==r&&void 0!==r?r:"",dataCy:"document-info-word-count"})})})]})},At=function(e){var t=e.show,n=e.onHide,r=Object(Ft.a)();return Object(a.a)(),Object(w.jsx)(C.a,{show:t,onHide:n,closeButton:!0,titleI18nKey:"editor.modal.documentInfo.title","data-cy":"document-info-modal",children:Object(w.jsx)(v.a.Body,{children:Object(w.jsxs)(Ye.a,{children:[Object(w.jsx)(Ye.a.Item,{children:Object(w.jsx)(Pt.b,{size:"2x",mode:Pt.a.CREATED,time:be.DateTime.local().minus({days:11}),userName:"Tilman",profileImageSrc:"".concat(r,"img/avatar.png")})}),Object(w.jsx)(Ye.a.Item,{children:Object(w.jsx)(Pt.b,{size:"2x",mode:Pt.a.EDITED,time:be.DateTime.local().minus({minutes:3}),userName:"Philip",profileImageSrc:"".concat(r,"img/avatar.png")})}),Object(w.jsx)(Ye.a.Item,{children:Object(w.jsx)(Kt.a,{icon:"users",size:"2x",children:Object(w.jsx)(y.a,{i18nKey:"editor.modal.documentInfo.usersContributed",children:Object(w.jsx)(Bt,{text:"42"})})})}),Object(w.jsx)(Ye.a.Item,{children:Object(w.jsx)(Kt.a,{icon:"history",size:"2x",children:Object(w.jsx)(y.a,{i18nKey:"editor.modal.documentInfo.revisions",children:Object(w.jsx)(Bt,{text:"192"})})})}),Object(w.jsx)(Ye.a.Item,{children:Object(w.jsx)(Wt,{})})]})})})},Vt=function(e){var t=e.className,n=e.hide,r=Object(i.useState)(!1),o=Object(c.a)(r,2),s=o[0],l=o[1];return Object(a.a)(),Object(w.jsxs)(i.Fragment,{children:[Object(w.jsx)(Dt,{hide:n,className:t,icon:"line-chart",onClick:function(){return l(!0)},"data-cy":"sidebar-btn-document-info",children:Object(w.jsx)(y.a,{i18nKey:"editor.modal.documentInfo.title"})}),Object(w.jsx)(At,{show:s,onHide:function(){return l(!1)}})]})},Ut=n(46),_t=n(1082),Gt=n.n(_t),zt=n(168),qt=function(){var e=Object(a.a)().t,t=Object(l.a)(),n=Object(i.useCallback)((function(){var n=Gt()(xt.a.getState().noteDetails.noteTitle);Object(zt.a)(t,"".concat(""!==n?n:e("editor.untitledNote"),".md"),"text/markdown")}),[t,e]);return Object(w.jsx)(Dt,{"data-cy":"menu-export-markdown",onClick:n,icon:"file-text",children:Object(w.jsx)(y.a,{i18nKey:"editor.export.markdown-file"})})},$t=function(e){var t=e.children,n=e.expand;return Object(w.jsx)("div",{className:"sidebar-menu ".concat(n?"show":""),children:Object(w.jsx)("div",{className:"d-flex flex-column",children:t})})};!function(e){e[e.NONE=0]="NONE",e[e.USERS_ONLINE=1]="USERS_ONLINE",e[e.IMPORT=2]="IMPORT",e[e.EXPORT=3]="EXPORT"}(it||(it={}));var Xt,Yt=function(e){var t=e.className,n=e.menuId,r=e.onClick,c=e.selectedMenuId;Object(a.a)();var o=c!==it.NONE&&c!==n,s=c===n,l=Object(i.useCallback)((function(){r(n)}),[n,r]);return Object(w.jsxs)(i.Fragment,{children:[Object(w.jsx)(Dt,{"data-cy":"menu-export",hide:o,icon:s?"arrow-left":"cloud-download",className:t,onClick:l,children:Object(w.jsx)(y.a,{i18nKey:"editor.documentBar.export"})}),Object(w.jsxs)($t,{expand:s,children:[Object(w.jsx)(Dt,{icon:"github",children:"Gist"}),Object(w.jsx)(Dt,{icon:"gitlab",children:"Gitlab Snippet"}),Object(w.jsx)(qt,{}),Object(w.jsx)(Dt,{icon:"file-code-o",children:"HTML"}),Object(w.jsx)(Dt,{icon:"file-code-o",children:Object(w.jsx)(y.a,{i18nKey:"editor.export.rawHtml"})}),Object(w.jsx)(Dt,{icon:"file-pdf-o",children:Object(w.jsxs)("a",{className:"small text-muted",dir:"auto",href:Ut.faq,target:"_blank",rel:"noopener noreferrer",children:[Object(w.jsx)(y.a,{i18nKey:"editor.export.pdf"}),"\xa0",Object(w.jsx)("span",{className:"text-primary",children:Object(w.jsx)(y.a,{i18nKey:"common.why"})})]})})]})]})},Jt=function(){var e=Object(l.a)();Object(a.a)();var t=Object(i.useCallback)((function(t){return new Promise((function(n,r){var c=new FileReader;c.addEventListener("load",(function(){var t=c.result;Object(u.d)(0===e.length?t:"".concat(e,"\n").concat(t))})),c.addEventListener("loadend",(function(){n()})),c.addEventListener("error",(function(e){r(e)})),c.readAsText(t)}))}),[e]),n=Object(i.useRef)(),r=Object(i.useCallback)((function(){var e;null===(e=n.current)||void 0===e||e.call(n)}),[]);return Object(w.jsxs)(i.Fragment,{children:[Object(w.jsx)(Dt,{"data-cy":"menu-import-markdown",icon:"file-text-o",onClick:r,children:Object(w.jsx)(y.a,{i18nKey:"editor.import.file"})}),Object(w.jsx)(Ot,{onLoad:t,"data-cy":"menu-import-markdown-input",acceptedFiles:".md, text/markdown, text/plain",onClickRef:n})]})},Qt=function(e){var t=e.className,n=e.menuId,r=e.onClick,c=e.selectedMenuId;Object(a.a)();var o=c!==it.NONE&&c!==n,s=c===n,l=Object(i.useCallback)((function(){r(n)}),[n,r]);return Object(w.jsxs)(i.Fragment,{children:[Object(w.jsx)(Dt,{"data-cy":"menu-import",hide:o,icon:s?"arrow-left":"cloud-upload",className:t,onClick:l,children:Object(w.jsx)(y.a,{i18nKey:"editor.documentBar.import"})}),Object(w.jsxs)($t,{expand:s,children:[Object(w.jsx)(Dt,{icon:"github",children:"Gist"}),Object(w.jsx)(Dt,{icon:"gitlab",children:"Gitlab Snippet"}),Object(w.jsx)(Dt,{icon:"clipboard",children:Object(w.jsx)(y.a,{i18nKey:"editor.import.clipboard"})}),Object(w.jsx)(Jt,{})]})]})},Zt=n(212),en=n(69),tn=n(82),nn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(Object(en.a)(this,e),this.entryLifetime=void 0,this.maxEntries=void 0,this.store=new Map,t<0)throw new Error("Cache entry lifetime can not be less than 0 seconds.");this.entryLifetime=t,this.maxEntries=n}return Object(tn.a)(e,[{key:"has",value:function(e){if(!this.store.has(e))return!1;var t=this.store.get(e);return!!t&&t.entryCreated>=Date.now()-1e3*this.entryLifetime}},{key:"get",value:function(e){var t=this.store.get(e);if(!t)throw new Error('This cache entry does not exist. Check with ".has()" before using ".get()".');return t.data}},{key:"put",value:function(e,t){this.maxEntries>0&&this.store.size===this.maxEntries&&this.store.delete(this.store.keys().next().value),this.store.set(e,{entryCreated:Date.now(),data:t})}}]),e}(),rn=n(11),cn=new nn(600),an=function(){var e=Object(T.a)(N.a.mark((function e(t){var n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!cn.has(t)){e.next=2;break}return e.abrupt("return",cn.get(t));case 2:return e.next=4,fetch("".concat(Object(rn.c)(),"/users/").concat(t),Object(m.a)({},rn.a));case 4:return n=e.sent,Object(rn.b)(n),e.next=8,n.json();case 8:return r=e.sent,cn.put(t,r),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),on=n(167),sn=n(262),ln=n(114);!function(e){e[e.NONE=0]="NONE",e[e.VIEW=1]="VIEW",e[e.EDIT=2]="EDIT"}(Xt||(Xt={}));var un,dn=function(e){var t=e.title,n=e.editMode,r=e.onChangeEditMode,c=Object(a.a)().t;return Object(w.jsxs)("li",{className:"list-group-item d-flex flex-row justify-content-between align-items-center",children:[Object(w.jsx)(y.a,{i18nKey:t}),Object(w.jsxs)(sn.a,{type:"radio",name:"edit-mode",value:n,onChange:r,children:[Object(w.jsx)(ln.a,{title:c("editor.modal.permissions.denyGroup",{name:c(t)}),variant:"light",className:"text-secondary",value:Xt.NONE,children:Object(w.jsx)($e.a,{icon:"ban"})}),Object(w.jsx)(ln.a,{title:c("editor.modal.permissions.viewOnlyGroup",{name:c(t)}),variant:"light",className:"text-secondary",value:Xt.VIEW,children:Object(w.jsx)($e.a,{icon:"eye"})}),Object(w.jsx)(ln.a,{title:c("editor.modal.permissions.editGroup",{name:c(t)}),variant:"light",className:"text-secondary",value:Xt.EDIT,children:Object(w.jsx)($e.a,{icon:"pencil"})})]})]})},jn=n(161),bn=n(155);!function(e){e[e.VIEW=0]="VIEW",e[e.EDIT=1]="EDIT"}(un||(un={}));var fn,hn=function(e){var t=e.list,n=e.identifier,r=e.changeEditMode,o=e.removeEntry,s=e.createEntry,l=e.editI18nKey,u=e.viewI18nKey,d=e.removeI18nKey,j=e.addI18nKey,b=Object(a.a)().t,f=Object(i.useState)(""),h=Object(c.a)(f,2),O=h[0],m=h[1],x=function(){s(O),m("")};return Object(w.jsxs)("ul",{className:"list-group",children:[t.map((function(e){return Object(w.jsxs)("li",{className:"list-group-item d-flex flex-row justify-content-between align-items-center",children:[n(e),Object(w.jsxs)("div",{children:[Object(w.jsx)(g.a,{variant:"light",className:"text-danger mr-2",title:b(d,{name:e.name}),onClick:function(){return o(e.id)},children:Object(w.jsx)($e.a,{icon:"times"})}),Object(w.jsxs)(sn.a,{type:"radio",name:"edit-mode",value:e.canEdit?un.EDIT:un.VIEW,onChange:function(t){return r(e.id,t===un.EDIT)},children:[Object(w.jsx)(ln.a,{title:b(u,{name:e.name}),variant:"light",className:"text-secondary",value:un.VIEW,children:Object(w.jsx)($e.a,{icon:"eye"})}),Object(w.jsx)(ln.a,{title:b(l,{name:e.name}),variant:"light",className:"text-secondary",value:un.EDIT,children:Object(w.jsx)($e.a,{icon:"pencil"})})]})]})]},e.id)})),Object(w.jsx)("li",{className:"list-group-item",children:Object(w.jsx)("form",{onSubmit:function(e){e.preventDefault(),x()},children:Object(w.jsxs)(jn.a,{className:"mr-1 mb-1",children:[Object(w.jsx)(bn.a,{value:O,placeholder:b(j),"aria-label":b(j),onChange:function(e){return m(e.currentTarget.value)}}),Object(w.jsx)(g.a,{variant:"light",className:"text-secondary ml-2",title:b(j),onClick:x,children:Object(w.jsx)($e.a,{icon:"plus"})})]})})})]})},On={owner:"dermolly",sharedTo:[{username:"emcrx",canEdit:!0},{username:"mrdrogdrog",canEdit:!1}],sharedToGroup:[{id:"1",canEdit:!0},{id:"2",canEdit:!1}]},mn=function(e){var t,n,r=e.show,o=e.onHide;Object(a.a)();var s=Object(i.useState)(!1),l=Object(c.a)(s,2),u=l[0],d=l[1],b=Object(i.useState)([]),f=Object(c.a)(b,2),h=f[0],O=f[1],m=Object(i.useState)(),x=Object(c.a)(m,2),p=x[0],g=x[1],E=Object(i.useState)(Xt.NONE),k=Object(c.a)(E,2),N=k[0],T=k[1],S=Object(i.useState)(Xt.NONE),I=Object(c.a)(S,2),R=I[0],L=I[1];Object(i.useEffect)((function(){an(On.owner).then((function(e){g({name:e.name,photo:e.photo})})).catch((function(){return d(!0)})),On.sharedTo.forEach((function(e){an(e.username).then((function(t){O((function(n){return n.concat([{id:t.id,name:t.name,photo:t.photo,canEdit:e.canEdit}])}))})).catch((function(){return d(!0)}))})),On.sharedToGroup.forEach((function(e){"1"===e.id?T(e.canEdit?Xt.EDIT:Xt.VIEW):"2"===e.id&&L(e.canEdit?Xt.EDIT:Xt.VIEW)}))}),[]);return Object(w.jsx)(C.a,{show:r,onHide:o,closeButton:!0,titleI18nKey:"editor.modal.permissions.title",children:Object(w.jsxs)(v.a.Body,{children:[Object(w.jsx)("h5",{className:"mb-3",children:Object(w.jsx)(y.a,{i18nKey:"editor.modal.permissions.owner"})}),Object(w.jsx)(j.a,{condition:u,children:Object(w.jsx)(Zt.a,{variant:"danger",children:Object(w.jsx)(y.a,{i18nKey:"editor.modal.permissions.error"})})}),Object(w.jsx)("ul",{className:"list-group",children:Object(w.jsx)("li",{className:"list-group-item d-flex flex-row align-items-center",children:Object(w.jsx)(on.a,{name:null!==(t=null===p||void 0===p?void 0:p.name)&&void 0!==t?t:"",photo:null!==(n=null===p||void 0===p?void 0:p.photo)&&void 0!==n?n:""})})}),Object(w.jsx)("h5",{className:"my-3",children:Object(w.jsx)(y.a,{i18nKey:"editor.modal.permissions.sharedWithUsers"})}),Object(w.jsx)(hn,{list:h,identifier:function(e){return Object(w.jsx)(on.a,{name:e.name,photo:e.photo})},changeEditMode:function(e,t){O((function(n){return n.map((function(n){return n.id===e&&(n.canEdit=t),n}))}))},removeEntry:function(e){O((function(t){return t.filter((function(t){return t.id!==e}))}))},createEntry:function(e){O((function(t){return t.concat({id:e,photo:"/img/avatar.png",name:e,canEdit:!1})}))},editI18nKey:"editor.modal.permissions.editUser",viewI18nKey:"editor.modal.permissions.viewOnlyUser",removeI18nKey:"editor.modal.permissions.removeUser",addI18nKey:"editor.modal.permissions.addUser"}),Object(w.jsx)("h5",{className:"my-3",children:Object(w.jsx)(y.a,{i18nKey:"editor.modal.permissions.sharedWithGroups"})}),Object(w.jsxs)("ul",{className:"list-group",children:[Object(w.jsx)(dn,{title:"editor.modal.permissions.allUser",editMode:N,onChangeEditMode:T}),Object(w.jsx)(dn,{title:"editor.modal.permissions.allLoggedInUser",editMode:R,onChangeEditMode:L})]})]})})},xn=function(e){var t=e.className,n=e.hide,r=Object(i.useState)(!1),o=Object(c.a)(r,2),s=o[0],l=o[1];return Object(a.a)(),Object(w.jsxs)(i.Fragment,{children:[Object(w.jsx)(Dt,{hide:n,className:t,icon:"lock",onClick:function(){return l(!0)},children:Object(w.jsx)(y.a,{i18nKey:"editor.modal.permissions.title"})}),Object(w.jsx)(mn,{show:s,onHide:function(){return l(!1)}})]})},pn=n(23),vn=n(27),gn=function(e){var t=e.className,n=e.hide,r=Object(a.a)().t,c=Object(pn.m)().id,o=Object(tt.a)((function(e){return e.history})),s=Object(i.useMemo)((function(){var e=o.find((function(e){return e.identifier===c}));return!!e&&e.pinStatus}),[c,o]),l=Object(i.useCallback)((function(){Object(vn.i)(c).catch(Object(R.d)(r("landing.history.error.updateEntry.text")))}),[c,r]);return Object(w.jsx)(Dt,{icon:"thumb-tack",hide:n,onClick:l,className:"".concat(null!==t&&void 0!==t?t:""," ").concat(s?"icon-highlighted":""),children:Object(w.jsx)(y.a,{i18nKey:s?"editor.documentBar.pinnedToHistory":"editor.documentBar.pinNoteToHistory"})})},yn=n(264),Cn=n(111),wn=n(1086),En=n.n(wn),kn=new nn(3600),Nn=function(){var e=Object(T.a)(N.a.mark((function e(t,n){var r,c,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="".concat(t,":").concat(n),!kn.has(r)){e.next=3;break}return e.abrupt("return",kn.get(r));case 3:return e.next=5,fetch(Object(rn.c)()+"notes/".concat(t,"/revisions/").concat(n),Object(m.a)({},rn.a));case 5:return c=e.sent,Object(rn.b)(c),e.next=9,c.json();case 9:return i=e.sent,kn.put(r,i),e.abrupt("return",i);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Tn=function(){var e=Object(T.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(Object(rn.c)()+"notes/".concat(t,"/revisions-list"),Object(m.a)({},rn.a));case 2:return n=e.sent,Object(rn.b)(n),e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Sn=function(e){var t,n=e.active,r=e.onClick,c=e.revision,i=e.revisionAuthorListMap;return Object(w.jsxs)(Ye.a.Item,{as:"li",active:n,onClick:r,className:"user-select-none revision-item d-flex flex-column",children:[Object(w.jsxs)("span",{children:[Object(w.jsx)($e.a,{icon:"clock-o",className:"mx-2"}),be.DateTime.fromMillis(1e3*c.timestamp).toFormat("DDDD T")]}),Object(w.jsxs)("span",{children:[Object(w.jsx)($e.a,{icon:"file-text-o",className:"mx-2"}),Object(w.jsx)(y.a,{i18nKey:"editor.modal.revision.length"}),": ",c.length]}),Object(w.jsxs)("span",{className:"d-flex flex-row my-1 align-items-center",children:[Object(w.jsx)($e.a,{icon:"user-o",className:"mx-2"}),null===(t=i.get(c.timestamp))||void 0===t?void 0:t.map((function(e,t){return Object(w.jsx)(on.a,{name:e.name,photo:e.photo,showName:!1,additionalClasses:"mx-1"},t)}))]})]})},In=(n(1091),function(e){var t=e.show,n=e.onHide;Object(a.a)();var r=Object(i.useState)([]),o=Object(c.a)(r,2),s=o[0],u=o[1],d=Object(i.useState)(null),b=Object(c.a)(d,2),f=b[0],h=b[1],O=Object(i.useState)(null),m=Object(c.a)(O,2),x=m[0],p=m[1],E=Object(i.useState)(!1),k=Object(c.a)(E,2),N=k[0],T=k[1],S=Object(i.useRef)(new Map),I=Object($.a)(),R=Object(pn.m)().id;Object(i.useEffect)((function(){Tn(R).then((function(e){e.forEach((function(e){var t=function(e){var t=[];return e.forEach((function(e,n){n>9||an(e).then((function(e){t.push(e)})).catch((function(e){return console.error(e)}))})),t}(e.authors);S.current.set(e.timestamp,t)})),u(e),e.length>=1&&h(e[0].timestamp)})).catch((function(){return T(!0)}))}),[u,T,R]),Object(i.useEffect)((function(){null!==f&&Nn(R,f).then((function(e){p(e)})).catch((function(){return T(!0)}))}),[f,R]);var L=Object(l.a)();return Object(w.jsxs)(C.a,{show:t,onHide:n,titleI18nKey:"editor.modal.revision.title",icon:"history",closeButton:!0,size:"xl",additionalClasses:"revision-modal",children:[Object(w.jsx)(v.a.Body,{children:Object(w.jsxs)(yn.a,{children:[Object(w.jsx)(Cn.a,{lg:4,className:"scroll-col",children:Object(w.jsx)(Ye.a,{as:"ul",children:s.map((function(e,t){return Object(w.jsx)(Sn,{active:f===e.timestamp,revision:e,revisionAuthorListMap:S.current,onClick:function(){return h(e.timestamp)}},t)}))})}),Object(w.jsxs)(Cn.a,{lg:8,className:"scroll-col",children:[Object(w.jsx)(j.a,{condition:N,children:Object(w.jsx)(Zt.a,{variant:"danger",children:Object(w.jsx)(y.a,{i18nKey:"editor.modal.revision.error"})})}),Object(w.jsx)(j.a,{condition:!N&&!!x,children:Object(w.jsx)(En.a,{oldValue:null===x||void 0===x?void 0:x.content,newValue:L,splitView:!1,compareMethod:wn.DiffMethod.WORDS,useDarkTheme:I})})]})]})}),Object(w.jsxs)(v.a.Footer,{children:[Object(w.jsx)(g.a,{variant:"secondary",onClick:n,children:Object(w.jsx)(y.a,{i18nKey:"common.close"})}),Object(w.jsx)(g.a,{variant:"danger",disabled:!f,onClick:function(){return window.alert("Not yet implemented. Requires websocket.")},children:Object(w.jsx)(y.a,{i18nKey:"editor.modal.revision.revertButton"})}),Object(w.jsx)(g.a,{variant:"primary",disabled:!f,onClick:function(){return e=R,void((t=x)&&Object(zt.a)(t.content,"".concat(e,"-").concat(t.timestamp,".md"),"text/markdown"));var e,t},children:Object(w.jsx)(y.a,{i18nKey:"editor.modal.revision.download"})})]})]})}),Rn=function(e){var t=e.className,n=e.hide,r=Object(i.useState)(!1),a=Object(c.a)(r,2),o=a[0],s=a[1];return Object(w.jsxs)(i.Fragment,{children:[Object(w.jsx)(Dt,{hide:n,className:t,icon:"history",onClick:function(){return s(!0)},children:Object(w.jsx)(y.a,{i18nKey:"editor.modal.revision.title"})}),Object(w.jsx)(In,{show:o,onHide:function(){return s(!1)}})]})},Ln=n(169),Dn=n(120),Mn=n(147),Kn=function(e){var t=e.show,n=e.onHide;Object(a.a)();var r=Object(tt.a)((function(e){return e.noteDetails.frontmatter})),c=Object(tt.a)((function(e){return e.editorConfig.editorMode})),i=Object(Ln.a)(),o=Object(pn.m)().id;return Object(w.jsx)(C.a,{show:t,onHide:n,closeButton:!0,titleI18nKey:"editor.modal.shareLink.title",children:Object(w.jsxs)(v.a.Body,{children:[Object(w.jsx)(y.a,{i18nKey:"editor.modal.shareLink.editorDescription"}),Object(w.jsx)(Dn.a,{content:"".concat(i,"n/").concat(o,"?").concat(c),nativeShareButton:!0,url:"".concat(i,"n/").concat(o,"?").concat(c)}),Object(w.jsxs)(j.a,{condition:r.type===Mn.c.SLIDE,children:[Object(w.jsx)(y.a,{i18nKey:"editor.modal.shareLink.slidesDescription"}),Object(w.jsx)(Dn.a,{content:"".concat(i,"p/").concat(o),nativeShareButton:!0,url:"".concat(i,"p/").concat(o)})]}),Object(w.jsxs)(j.a,{condition:""===r.type,children:[Object(w.jsx)(y.a,{i18nKey:"editor.modal.shareLink.viewOnlyDescription"}),Object(w.jsx)(Dn.a,{content:"".concat(i,"s/").concat(o),nativeShareButton:!0,url:"".concat(i,"s/").concat(o)})]})]})})},Pn=function(e){var t=e.className,n=e.hide,r=Object(i.useState)(!1),o=Object(c.a)(r,2),s=o[0],l=o[1];return Object(a.a)(),Object(w.jsxs)(i.Fragment,{children:[Object(w.jsx)(Dt,{hide:n,className:t,icon:"share",onClick:function(){return l(!0)},children:Object(w.jsx)(y.a,{i18nKey:"editor.modal.shareLink.title"})}),Object(w.jsx)(Kn,{show:s,onHide:function(){return l(!1)}})]})};n(1092),n(1093);!function(e){e.ACTIVE="active",e.INACTIVE="inactive"}(fn||(fn={}));var Bn,Fn=function(e){var t=e.status;return Object(w.jsx)("span",{className:"activeIndicator ".concat(t)})},Hn=(n(1094),n(1095),function(e){var t=e.name,n=e.photo,r=e.color,c=e.status;return Object(w.jsxs)("div",{className:"d-flex align-items-center h-100 w-100",children:[Object(w.jsx)("div",{className:"d-inline-flex align-items-bottom user-line-color-indicator",style:{borderLeftColor:r}}),Object(w.jsx)(on.a,{photo:n,name:t,additionalClasses:"flex-fill overflow-hidden px-2 text-nowrap w-100"}),Object(w.jsx)("div",{className:"active-indicator-container",children:Object(w.jsx)(Fn,{status:c})})]})}),Wn=function(e){var t=e.className,n=e.menuId,r=e.onClick,o=e.selectedMenuId,s=Object(i.useRef)(null),l=Object(i.useState)(2),u=Object(c.a)(l,1)[0];Object(a.a)(),Object(i.useEffect)((function(){var e,t="".concat(u);null===(e=s.current)||void 0===e||e.style.setProperty("--users-online",'"'.concat(t,'"'))}),[u]);var d=o!==it.NONE&&o!==n,j=o===n,b=Object(i.useCallback)((function(){r(n)}),[n,r]);return Object(w.jsxs)(i.Fragment,{children:[Object(w.jsx)(Dt,{hide:d,buttonRef:s,onClick:b,icon:j?"arrow-left":"users",variant:"primary",className:"online-entry ".concat(null!==t&&void 0!==t?t:""),children:Object(w.jsx)(y.a,{i18nKey:"editor.onlineStatus.online"})}),Object(w.jsxs)($t,{expand:j,children:[Object(w.jsx)(Dt,{children:Object(w.jsx)(Hn,{name:"Philip Molares",photo:"/img/avatar.png",color:"red",status:fn.INACTIVE})}),Object(w.jsx)(Dt,{children:Object(w.jsx)(Hn,{name:"Tilman Vatteroth",photo:"/img/avatar.png",color:"blue",status:fn.ACTIVE})})]})]})},An=function(){var e=Object(i.useRef)(null),t=Object(i.useState)(it.NONE),n=Object(c.a)(t,2),r=n[0],a=n[1];Object(q.a)(e,(function(){a(it.NONE)}));var o=Object(i.useCallback)((function(e){var t=r===e?it.NONE:e;a(t)}),[r]),s=r!==it.NONE;return Object(w.jsx)("div",{className:"slide-sidebar",children:Object(w.jsxs)("div",{ref:e,className:"sidebar-inner ".concat(s?"show":""),children:[Object(w.jsx)(Wn,{menuId:it.USERS_ONLINE,selectedMenuId:r,onClick:o}),Object(w.jsx)(Vt,{hide:s}),Object(w.jsx)(Rn,{hide:s}),Object(w.jsx)(xn,{hide:s}),Object(w.jsx)(Qt,{menuId:it.IMPORT,selectedMenuId:r,onClick:o}),Object(w.jsx)(Yt,{menuId:it.EXPORT,selectedMenuId:r,onClick:o}),Object(w.jsx)(Pn,{hide:s}),Object(w.jsx)(Mt,{hide:s}),Object(w.jsx)(gn,{hide:s})]})})},Vn=(n(1096),function(e){var t=e.onGrab;return Object(w.jsx)("div",{onMouseDown:function(){return t()},onTouchStart:function(){return t()},className:"split-divider"})}),Un=(n(1097),function(e){return void 0!==e.buttons}),_n=function(e){var t=e.additionalContainerClassName,n=e.left,r=e.right,a=e.showLeft,o=e.showRight,s=Object(i.useState)(50),l=Object(c.a)(s,2),u=l[0],d=l[1],b=Math.max(0,Math.min(100,o?u:100)),f=Object(i.useRef)(!1),h=Object(i.useRef)(null),O=Object(i.useCallback)((function(){f.current=!0}),[]),m=Object(i.useCallback)((function(){f.current&&(f.current=!1)}),[]),x=Object(i.useCallback)((function(e){if(f.current&&h.current){if(Un(e)&&1!==e.buttons)return f.current=!1,void e.preventDefault();var t=(function(e){return Un(e)?e.pageX:null===(t=e.touches[0])||void 0===t?void 0:t.pageX;var t}(e)-h.current.offsetLeft)/h.current.clientWidth;d(100*t),e.preventDefault()}}),[]);return Object(i.useEffect)((function(){var e=x,t=m;return window.addEventListener("touchmove",e),window.addEventListener("mousemove",e),window.addEventListener("touchcancel",t),window.addEventListener("touchend",t),window.addEventListener("mouseup",t),function(){window.removeEventListener("touchmove",e),window.removeEventListener("mousemove",e),window.removeEventListener("touchcancel",t),window.removeEventListener("touchend",t),window.removeEventListener("mouseup",t)}}),[f,x,m]),Object(w.jsxs)("div",{ref:h,className:"flex-fill flex-row d-flex ".concat(t||""),children:[Object(w.jsx)("div",{className:"splitter left ".concat(a?"":"d-none"),style:{width:"calc(".concat(b,"% - 5px)")},children:n}),Object(w.jsx)(j.a,{condition:a&&o,children:Object(w.jsx)("div",{className:"splitter separator",children:Object(w.jsx)(Vn,{onGrab:O})})}),Object(w.jsx)("div",{className:"splitter right ".concat(o?"":"d-none"),style:{width:"calc(100% - ".concat(b,"%)")},children:r})]})},Gn=n(33),zn=n(198),qn="dontshowtestnotification",$n=n(45),Xn=n.n($n),Yn=n(26);!function(e){e[e.EDITOR=0]="EDITOR",e[e.RENDERER=1]="RENDERER"}(Bn||(Bn={}));var Jn=function(){Object(a.a)();var e=Object(l.a)(),t=Object(i.useRef)(Bn.EDITOR),n=Object(tt.a)((function(e){return e.editorConfig.editorMode})),r=Object(tt.a)((function(e){return e.editorConfig.syncScroll})),m=Object(i.useState)((function(){return{editorScrollState:{firstLineInView:1,scrolledPercentage:0},rendererScrollState:{firstLineInView:1,scrolledPercentage:0}}})),x=Object(c.a)(m,2),p=x[0],v=x[1],g=Object(i.useCallback)((function(e){t.current===Bn.RENDERER&&r&&v((function(t){return{editorScrollState:e,rendererScrollState:t.rendererScrollState}}))}),[r]),y=Object(i.useCallback)((function(e){t.current===Bn.EDITOR&&r&&v((function(t){return{rendererScrollState:e,editorScrollState:t.editorScrollState}}))}),[r]);Object(i.useEffect)((function(){return document.addEventListener("keydown",St,!1),function(){document.removeEventListener("keydown",St,!1)}}),[]),Object(o.a)(),Object(s.a)(),function(){var e=Object(pn.l)().search;Object(i.useEffect)((function(){var t=e.substr(1),n=Object.values(O.a).find((function(e){return e===t}));n&&Object(Qe.e)(n)}),[e])}();var C=Object(Tt.a)(),E=Object(c.a)(C,2),k=E[0],N=E[1];!function(e){var t=Object(pn.m)().id,n=Object(tt.a)((function(e){return!!e.user})),r=Object(tt.a)((function(e){return e.noteDetails.noteTitle})),c=Object(tt.a)((function(e){return e.noteDetails.frontmatter.tags})),a=Object(i.useRef)(""),o=Object(i.useRef)([]);Object(i.useEffect)((function(){var i;if(e&&!n&&(r!==a.current||!Xn()(c,o.current))){var s=null!==(i=xt.a.getState().history.find((function(e){return e.identifier===t})))&&void 0!==i?i:{identifier:t,title:"",pinStatus:!1,lastVisited:"",tags:[],origin:Yn.b.LOCAL};s.origin!==Yn.b.REMOTE&&(s.title=r,s.tags=c,s.lastVisited=(new Date).toISOString(),Object(vn.j)(t,s),a.current=r,o.current=c)}}),[e,t,n,r,c])}(!k&&!N);var T=Object(i.useCallback)((function(){t.current=Bn.RENDERER}),[]),S=Object(i.useCallback)((function(){t.current=Bn.EDITOR}),[]);Object(i.useEffect)((function(){window.localStorage.getItem(qn)||(console.debug("[Notifications] Dispatched test notification"),Object(R.c)("Notification-Test!","It Works!",R.a,"info-circle",[{label:"Don't show again",onClick:function(){window.localStorage.setItem(qn,"1")}}]))}),[]);var I=Object(i.useMemo)((function(){return Object(w.jsx)(Nt,{onContentChange:u.d,content:e,scrollState:p.editorScrollState,onScroll:y,onMakeScrollSource:S})}),[e,y,p.editorScrollState,S]),L=Object(i.useMemo)((function(){return Object(w.jsx)(It.a,{frameClasses:"h-100 w-100",markdownContent:e,onMakeScrollSource:T,onFirstHeadingChange:u.e,onTaskCheckedChange:u.a,onFrontmatterChange:u.c,onScroll:g,scrollState:p.rendererScrollState,rendererType:Gn.b.DOCUMENT})}),[e,g,p.rendererScrollState,T]);return Object(w.jsxs)(Ht.a,{children:[Object(w.jsx)(zn.a,{}),Object(w.jsx)(d.a,{}),Object(w.jsxs)("div",{className:"d-flex flex-column vh-100",children:[Object(w.jsx)(h.a,{mode:h.b.EDITOR}),Object(w.jsxs)("div",{className:"container",children:[Object(w.jsx)(b.a,{show:k}),Object(w.jsx)(f.a,{show:N})]}),Object(w.jsx)(j.a,{condition:!k&&!N,children:Object(w.jsxs)("div",{className:"flex-fill d-flex h-100 w-100 overflow-hidden flex-row",children:[Object(w.jsx)(_n,{showLeft:n===O.a.EDITOR||n===O.a.BOTH,left:I,showRight:n===O.a.PREVIEW||n===O.a.BOTH,right:L,additionalContainerClassName:"overflow-hidden"}),Object(w.jsx)(An,{})]})})]})]})};t.default=Jn}}]);
//# sourceMappingURL=editor.72102639.chunk.js.map